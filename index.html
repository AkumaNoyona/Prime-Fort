<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime Fort - Экосистема безопасности</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/d3@7"></script> 
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,400,0,0" rel="stylesheet" />

    <style>
        :root {
            --primary-color: #5c5c5e;
            --text-color-dark: #1d1d1f;
            --text-color-light: #f5f5f7;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --nav-button-bg: rgba(29, 29, 31, 0.7);
            --nav-button-hover-bg: rgba(29, 29, 31, 0.9);
            --nav-button-padding: 10px 20px;
            --nav-button-border-radius: 999px;
            --product-slide-bg: #F5F5F7; 
            --learn-more-hover-bg: #16435a;
            --slideshow-button-border: rgba(110, 110, 115, 0.4);
            --success-color: #0071e3;
            --danger-color: #d93025;
        }

        body {
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #1d1d1f; 
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            min-height: 100vh; 
            display: flex; 
            flex-direction: column; 
            transition: background-image 0.3s ease-out;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Добавлено: #root должен занимать оставшееся место */
        #root {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        /* Добавлено: Контейнер App должен расти */
        .app-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
             position: relative;
    z-index: 1;
        }


        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 50px;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            background-color: transparent;
            z-index: 1000;
            box-sizing: border-box;
        }

        /* Элемент для исчезновения контента под шапкой */
        .scroll-fade-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 90px;
            z-index: 999;
            pointer-events: none;
            background: linear-gradient(
                to bottom,
                rgba(29, 29, 31, 0.70) 0%,
                rgba(29, 29, 31, 0) 100%
            );
        }

        .logo {
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            height: 40px;
            padding: 5px 10px;
            color: var(--text-color-light);
            background-color: transparent;
            border-radius: 6px;
            opacity: 1;
            transition: opacity 0.3s ease;
            box-shadow: none;
            display: flex;
            align-items: center;
            gap: 30px;
            z-index: 1010;
        }
        .logo:hover { opacity: 0.8; }

        .logo-svg {
            width: 50px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: hidden;
        }

        .logo-text {
            font-size: 26px;
            font-weight: 650;
            color: var(--text-color-light);
        }

        .nav-links-container {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background-color: transparent;
            padding: 0;
            border-radius: 0;
            backdrop-filter: none;
            box-shadow: none;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-color-light);
            font-size: 16px;
            font-weight: 500;
            transition: color 0.3s ease, background-color 0.3s ease, transform 0.2s;
            cursor: pointer;
            padding: var(--nav-button-padding);
            background-color: var(--nav-button-bg);
            border-radius: var(--nav-button-border-radius);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 80px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            backdrop-filter: blur(8px);
        }

        .nav-link:hover {
            color: #fff;
            background-color: var(--nav-button-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .cart-icon {
            cursor: pointer;
            color: var(--text-color-light);
            transition: color 0.3s ease, transform 0.2s, background-color 0.3s ease, box-shadow 0.3s ease;
            padding: var(--nav-button-padding);
            background-color: var(--nav-button-bg);
            border-radius: var(--nav-button-border-radius);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            backdrop-filter: blur(8px);
            position: relative; 
        }
        .cart-icon:hover {
            color: #fff;
            background-color: var(--nav-button-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .cart-icon svg {
            width: 32px;
            height: 28px;
            fill: currentColor;
            stroke: none;
        }

        /* === ЗНАЧОК КОРЗИНЫ === */
        .cart-badge {
            position: absolute;
            top: 0px;
            right: 0px;
            background-color: #50be3d;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: translate(30%, -30%);
            border: 2px solid var(--nav-button-hover-bg);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 40px 40px; 
            position: relative;
            background-color: transparent;
            z-index: 1;
            padding-top: 0px; 
            flex-grow: 1; /* Добавлено для прижатия подвала */
        }
        
        /* Контейнер для страниц (корзина, модули) */
        .page-container {
            flex-grow: 1;
        }

       .container.cart-page-container {
    max-width: none; /* Убираем ограничение по ширине */
    padding-left: 50px;
    padding-right: 50px;
    overflow-x: hidden; /* Скрываем горизонтальный скролл для всего контейнера */
}

/* Увеличение отступов только для страницы корзины */
.view-cart .container.cart-page-container {
    padding-left: 70px !important;
    padding-right: 70px !important;
}

.view-tariffs .container.cart-page-container {
    padding-left: 65px;
    padding-right: 65px;
}


        /* --- КОД ДЛЯ АНИМАЦИИ ЗАГРУЗКИ --- */
        @keyframes heroEntrance {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hero-title, .slideshow-wrapper, .product-slideshow-wrapper, .hero-subtitle { 
            opacity: 0; transform: translateY(20px); transition: none; 
        }
        .hero-title.animate-in, .slideshow-wrapper.animate-in, .product-slideshow-wrapper.animate-in, .hero-subtitle.animate-in { 
            animation: heroEntrance 1.0s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; 
        }
        /* ---------------------------------- */

        .hero-title {
            text-align: center;
            font-size: 72px;
            font-weight: 700;
            letter-spacing: -0.015em;
            margin: 100px 0 0; 
            color: white;
            text-shadow: none;
        }
        
        .hero-subtitle {
            text-align: center;
            font-size: 40px; 
            font-weight: 500;
            letter-spacing: -0.01em;
            margin: -20px 0 4vh; 
            color: rgba(255, 255, 255, 0.9);
            text-shadow: none;
        }

        /* Стиль для новых подзаголовков (Почему мы? Наши преимущества) */
        .benefit-subtitle-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 0 0 0; 
            opacity: 0; 
            transform: translateY(0px); 
            transition: opacity 0.8s ease-out; 
        }
        
        /* СТИЛЬ: "Ключевые продукты экосистемы" */
        .key-products-subtitle-container {
            margin: 80px 0 30px; 
            text-align: center;
            opacity: 0; 
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* СТИЛЬ: Для заголовка "Для кого" */
        .target-audience-subtitle-container {
            margin: 80px 0 30px; 
            text-align: center;
            opacity: 0; 
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .target-audience-subtitle {
            font-size: 40px; 
            font-weight: 600; 
            color: var(--text-color-light); 
            text-shadow: 0 1px 3px rgba(0,0,0,0.5); 
        }
        
        /* >>> СТИЛИ: Заголовок Партнеры <<< */
        .partners-subtitle-container {
            margin: 80px 0 30px; 
            text-align: center;
            opacity: 0; 
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .partners-subtitle-container.is-visible {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }

        .partners-subtitle {
            font-size: 40px; 
            font-weight: 600; 
            color: var(--text-color-light); 
            text-shadow: 0 1px 3px rgba(0,0,0,0.5); 
        }
        /* --------------------------------------- */


        .key-products-subtitle {
            font-size: 40px; 
            font-weight: 600; 
            color: var(--text-color-light); 
            text-shadow: 0 1px 3px rgba(0,0,0,0.5); 
        }

        .benefit-subtitle-container.is-visible {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }

        .benefit-subtitle {
            font-size: 40px; 
            font-weight: 600; 
            color: var(--text-color-light); 
            text-shadow: 0 1px 3px rgba(0,0,0,0.5); 
        }

        .product-info-block {
            display: flex;
            gap: 50px;
            align-items: center;
            background-color: rgba(255, 255, 255, 1.0);
            padding: 40px;
            border-radius: 40px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.04);
            transition: all 0.5s ease;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-delay: 0.2s; 
        }

        /* Стиль для карточек преимуществ */
        .benefit-card-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-top: 30px; 
        }

        .benefit-card {
            background-color: rgba(255, 255, 255, 1.0);
            padding: 40px;
            border-radius: 40px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.04);
            min-height: 250px; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0; 
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .benefit-card:hover {
             transform: translateY(-5px);
             box-shadow: 0 15px 40px rgba(0, 0, 0, 0.35);
        }
        
        /* СТИЛИ ДЛЯ КАРТОЧЕК АУДИТОРИИ */
        .audience-card-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr); 
            gap: 30px;
            margin-top: 30px; 
            margin-bottom: 80px; 
        }
        .audience-card {
            background-color: rgba(255, 255, 255, 1.0);
            padding: 40px;
            border-radius: 40px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.04);
            min-height: 250px; 
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            opacity: 0; 
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .audience-card:hover {
             transform: translateY(-5px);
             box-shadow: 0 15px 40px rgba(0, 0, 0, 0.35);
        }
        /* Задержки для последовательной анимации карточек аудитории */
        .audience-card:nth-child(1) { transition-delay: 0.1s; }
        .audience-card:nth-child(2) { transition-delay: 0.3s; }
        .audience-card:nth-child(3) { transition-delay: 0.5s; }
        

        /* >>> СТИЛИ ДЛЯ БЕГУЩЕЙ СТРОКИ ПАРТНЕРОВ <<< */
        
        @keyframes scrollPartners {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); } 
        }
        
        .partners-marquee {
            overflow: hidden;
            white-space: nowrap;
            position: relative;
            opacity: 1; 
            transform: translateY(0);
            transition: none; 
            -webkit-mask: none;
            mask: none;
            background-color: rgba(255, 255, 255, 1.0);
            padding: 30px 0;
            border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .partners-marquee.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .partner-logo-track {
            display: inline-flex; 
            animation: scrollPartners 45s linear infinite; 
            padding: 0 20px;
        }

        .partner-logo-item {
            display: flex;
            align-items: center;
            justify-content: center; 
            width: 300px; 
            height: 80px; 
            margin: 0 30px; 
            text-align: center;
            color: #6e6e73;
            font-weight: 500;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .partner-logo-item:hover {
            opacity: 1;
        }
        
        .partner-logo-item img {
            max-height: 65px; 
            max-width: 100%; 
            width: auto;
            object-fit: contain; 
            filter: none; 
            opacity: 1; 
            transition: filter 0.3s ease, opacity 0.3s ease;
        }
        .partner-logo-item[title="Сотби"] img {
            max-height: 90px; 
        }
        .partner-logo-item:hover img {
            filter: none; 
            opacity: 1;
        }


        .is-visible {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }
        
        .benefit-card:nth-child(1) { transition-delay: 0.1s; }
        .benefit-card:nth-child(2) { transition-delay: 0.2s; }
        .benefit-card:nth-child(3) { transition-delay: 0.3s; }
        .benefit-card:nth-child(4) { transition-delay: 0.4s; }


        /* Стили для первого слайд-шоу */
        .slideshow-wrapper {
            position: relative;
            overflow: hidden;
            height: 250px;
            margin-bottom: 50px;
            border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        /* Стили для ВТОРОГО слайд-шоу (Ключевые продукты) */
        .product-slideshow-wrapper {
            position: relative;
            overflow: hidden;
            height: 400px; 
            margin-bottom: 50px;
            border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition-delay: 0.2s; 
        }

        .slideshow-track {
            display: flex;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); 
        }

        .slideshow-block {
            min-width: 100%;
            background-color: var(--product-slide-bg); 
            padding: 50px 50px 100px; /* ИЗМЕНЕНО: Увеличен нижний отступ до 100px */
            box-sizing: border-box;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .slideshow-footer {
            position: absolute;
            bottom: 25px;
            right: 25px;
            z-index: 2;
        }
        
        .centered-slideshow-button {
            margin-top: 20px; 
        }

        .slideshow-title { font-size: 28px; font-weight: 600; margin-bottom: 15px; color: var(--text-color-dark); }
        .slideshow-text { font-size: 18px; color: #6e6e73; max-width: 80%; margin-bottom: 20px; }

        .slideshow-button {
            text-decoration: none;
            color: #5c5c5e;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s ease, background-color 0.3s ease, transform 0.2s, border-color 0.3s;
            cursor: pointer;
            padding: 6px 15px; 
            background-color: transparent;
            border: 1px solid var(--slideshow-button-border); 
            border-radius: var(--nav-button-border-radius);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 90px;
            box-shadow: none;
        }

        .slideshow-button:hover {
            color: var(--text-color-dark);
            background-color: rgba(110, 110, 115, 0.1);
            transform: translateY(-1px);
            border-color: rgba(110, 110, 115, 0.6);
            box-shadow: 0 1px 6px rgba(0,0,0,0.1);
        }

        .learn-more-button {
            align-self: flex-end;
            background-color: var(--primary-color);
            color: #fff;
            padding: 10px 17px; 
            border: none;
            border-radius: 999px;
            font-size: 14px; 
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s, box-shadow 0.3s;
            text-decoration: none; 
        }

        .learn-more-button:hover {
            background-color: var(--learn-more-hover-bg); 
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(22, 67, 90, 0.5);
        }
        
        /* === Стили для кнопок в модальном окне/корзине/карточках === */
        .button-primary {
            background-color: #5c5c5e;
            color: #fff;
            padding: 10px 17px; 
            border: none;
            border-radius: 999px;
            font-size: 14px; 
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s, box-shadow 0.3s;
            text-decoration: none;
            white-space: nowrap;
        }
        .button-primary:hover {
            background-color: #1d1d1f;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 113, 227, 0.4);
        }
        .button-secondary {
            background-color: var(--danger-color);
            padding: 5px 10px;
            font-size: 12px;
        }
        .button-secondary:hover {
            background-color: #a3221a;
            box-shadow: 0 2px 10px rgba(217, 48, 37, 0.4);
        }
        .button-back {
            background-color: var(--nav-button-bg);
            color: var(--text-color-light);
            padding: 10px 17px;
            border: none;
            border-radius: 999px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-bottom: 20px;
        }
        .button-back:hover {
            background-color: var(--nav-button-hover-bg);
        }

        /* Кнопка оформления заказа в корзине */
.cart-total-block .button-primary {
    background-color: #5c5c5e; /* как learn-more-button */
}

.cart-total-block .button-primary:hover {
    background-color: #16435a; /* как --learn-more-hover-bg */
    box-shadow: 0 5px 15px rgba(22, 67, 90, 0.5); /* как learn-more-button:hover */
}

/* Кнопка в модальном окне чека */
.receipt-modal-button {
    background-color: #5c5c5e;
    color: #fff;
    padding: 10px 17px;
    border: none;
    border-radius: 999px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s, box-shadow 0.3s;
    text-decoration: none;
    white-space: nowrap;
}


.receipt-modal-button:hover {
    background-color: #16435a;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(22, 67, 90, 0.5);
}

        /* Для страницы модулей */
.view-modules .button-primary:hover {
    background-color: #165414;
    box-shadow: 0 5px 15px rgba(17, 46, 15, 0.4);
}

/* Для страницы тарифов */
.view-tariffs .button-primary:hover {
    background-color: #165414;
    box-shadow: 0 5px 15px rgba(17, 46, 15, 0.4);
}


        /* --- СТИЛИЗАЦИЯ КНОПКИ ПЛЮС --- */
        .plus-button {
            position: absolute;
            bottom: 25px; 
            right: 25px;
            width: 40px;
            height: 40px;
            background-color: transparent; 
            border: 2px solid var(--slideshow-button-border); 
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: background-color 0.3s ease, transform 0.2s, border-color 0.3s;
            z-index: 10;
        }
        .plus-button span {
            font-size: 30px;
            color: var(--text-color-dark);
            line-height: 1;
            font-weight: 300; 
            transition: color 0.3s ease;
        }
        .plus-button:hover {
            background-color: var(--learn-more-hover-bg); 
            border-color: var(--learn-more-hover-bg);
            transform: scale(1.05);
        }
        .plus-button:hover span {
            color: var(--text-color-light); 
        }
        
        .slideshow-dots {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            z-index: 5;
        }

        .slideshow-nav-arrow {
            cursor: pointer;
            user-select: none;
            transition: color 0.3s ease, transform 0.2s;
            font-family: 'Material Symbols Rounded', sans-serif;
            font-weight: normal;
            font-size: 20px;
            color: rgba(110, 110, 115, 0.8);
            background: none;
            border: none;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            margin: 0 10px;
        }

        .slideshow-nav-arrow:hover {
            color: var(--text-color-dark);
            transform: scale(1.1);
            background-color: transparent;
            box-shadow: none;
        }

        .dot {
            width: 10px;
            height: 10px;
            background-color: rgba(110, 110, 115, 0.5);
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s;
        }

        .dot.active {
            background-color: var(--text-color-dark);
            transform: scale(1.1);
            box-shadow: 0 0 0 2px rgba(29, 29, 31, 0.3);
        }

        .dot:hover {
            background-color: rgba(110, 110, 115, 0.8);
        }

        /* ИЗМЕНЕНИЕ: ТЕМНЫЙ ФОН И ГРАНИЦА */
        .svg-container {
            flex: 30%;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            background-color: #345c7c ; /* Темно-серый фон */
            border-radius: 40px; 
            transition: transform 0.4s ease-out;
            padding: 20px; 
            
        }
        .product-info-block:hover .svg-container {
            transform: scale(1.02);
        }

        /* СТИЛИ ГРАФА D3 */
        .graph-node {
            cursor: grab; 
            transition: stroke 0.2s;
        }

        .graph-node:hover {
            stroke: #f5f5f7; /* Светлая обводка при наведении */
            stroke-width: 3px;
        }

        /* ИЗМЕНЕНИЕ: СВЕТЛЫЙ ТЕКСТ ДЛЯ ТЕМНОГО ФОНА */
        .node-text {
            fill: #f5f5f7; /* Светлый текст */
            pointer-events: none; 
            font-weight: 500;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        /* ИЗМЕНЕНИЕ: СТИЛЬ ЛИНИЙ */
        .graph-link { 
            stroke: #f5f5f7; /* Цвет линий, как предложил пользователь */
            stroke-opacity: 0.7;
            stroke-width: 1.5;
        }
        /* КОНЕЦ СТИЛЕЙ ГРАФА D3 */


        .description-container {
            flex: 70%;
            padding-left: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .product-description-text {
            font-size: 18px;
            color: var(--text-color-dark);
            margin-bottom: 30px;
        }

        /* --- ПЛАВНОСТЬ МОДАЛЬНОГО ОКНА И БЛЮР --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(5px); 
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.8s ease; 
            pointer-events: none;
        }

        .modal-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-content {
            background-color: var(--text-color-light);
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            transform: translateY(20px);
            transition: transform 0.8s ease, opacity 0.8s ease; 
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-overlay.open .modal-content {
            transform: translateY(0);
        }

        .modal-title {
            color: var(--text-color-dark);
            font-size: 30px;
            margin-top: 0;
            margin-bottom: 20px;
            padding-right: 35px;
        }

        .modal-description {
            color: #6e6e73;
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 25px; 
        }
        /* Стиль для жирных заголовков в модальном окне */
        .modal-description strong {
            color: var(--text-color-dark);
            font-weight: 600;
            display: block;
            margin-top: 15px;
        }

        .modal-price { 
            font-size: 24px;
            font-weight: 600;
            color: var(--text-color-dark);
            margin-bottom: 30px;
        }

        .modal-close-button {
            position: sticky;
            top: 0;
            right: 0;
            background: none;
            border: none;
            font-size: 30px;
            color: var(--text-color-dark);
            cursor: pointer;
            line-height: 1;
            padding: 5px;
            transition: transform 0.2s;
            float: right;
            margin: -25px -25px 0 0;
        }
        .modal-close-button:hover {
            transform: rotate(90deg);
        }
        
        /* === СТРАНИЦА КОРЗИНЫ === */
        .cart-page-container {
            padding-top: 120px; 
            padding-bottom: 80px;
            max-width: 1000px;
            margin: 0 auto;
            color: var(--text-color-light);
            min-height: 100vh;
            box-sizing: border-box;
        }
        .cart-page-container h2 {
            font-size: 40px;
            font-weight: 600;
            color: var(--text-color-light);
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
            margin-bottom: 30px;
            padding-bottom: 15px;
        }
        .cart-page-container .empty-cart-text {
            font-size: 18px;
            background-color: var(--nav-button-bg); /* Цвет фона как у навигационных кнопок */
            color: var(--text-color-light); /* Цвет текста как в навигации */
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            backdrop-filter: blur(8px); /* Эффект размытия как у навигации */
            box-shadow: 0 2px 8px rgba(0,0,0,0.2); /* Тень как у навигационных кнопок */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Легкая граница */
            /* Дополнительные стили для прозрачности как у навигации */
            opacity: 0.9;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgba(255, 255, 255, 1.0);
            color: var(--text-color-dark);
            padding: 20px 30px;
            border-radius: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.04);
        }
        
        .cart-item-info {
            flex-grow: 1;
        }
        
        .cart-item-info h4 {
            margin: 0 0 5px 0;
            font-size: 20px;
            font-weight: 600;
        }
        
        .cart-item-info p {
            margin: 0;
            font-size: 16px;
            font-weight: 500;
            color: #16435a;
        }
        
        .cart-total-block {
            margin-top: 40px;
            background-color: rgba(255, 255, 255, 1.0);
            color: var(--text-color-dark);
            padding: 30px 40px;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.04);
            text-align: right;
        }
        
        .cart-total-block h3 {
            font-size: 28px;
            font-weight: 600;
            margin: 0 0 20px 0;
        }

                /* <<< НОВЫЕ СТИЛИ: ДЛЯ СЧЕТЧИКА В КОРЗИНЕ >>> */
        .cart-item {
            /* ИЗМЕНЕНО: Добавляем flex-wrap для мобильных */
            flex-wrap: wrap; 
            gap: 15px; /* Добавляем отступ между блоками */
        }

        .cart-quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: #f5f5f7;
            border-radius: 999px;
            padding: 2px;
            border: 1px solid #d2d2d7;
            margin-left: auto; /* Прижимает блок к правому краю, перед кнопкой "Удалить" */
        }

        .cart-quantity-controls button {
            background-color: #fff;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 20px;
            font-weight: 500;
            line-height: 1;
            cursor: pointer;
            color: var(--text-color-dark);
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .cart-quantity-controls button:hover {
            background-color: #f0f0f0;
        }
        .cart-quantity-controls span {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-color-dark);
            min-width: 25px;
            text-align: center;
        }

        /* Адаптивность для кнопок в корзине */
        @media (max-width: 600px) {
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .cart-quantity-controls {
                margin-left: 0; /* Сбрасываем прижатие на мобильных */
            }
        }

        /* === НОВЫЕ СТИЛИ: СЕКЦИЯ МОДУЛЕЙ === */
        
        .module-section-title-container {
            margin: 20px 0 30px; 
            text-align: center;
            opacity: 0; 
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .module-section-title {
            margin: 20px;
            font-size: 40px; 
            font-weight: 600; 
            color: var(--text-color-light); 
            text-shadow: 0 1px 3px rgba(0,0,0,0.5); 
        }
        
        .module-grid {
             display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px; /* Уменьшено с 30px */
    margin-top: 30px; 
    margin-bottom: 80px; 
        }

        .module-card {
            background-color: rgba(255, 255, 255, 1.0);
            padding: 20px 25px; 
            border-radius: 40px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.04);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: flex-start;
            text-align: left;
            cursor: pointer; /* Делаем всю карточку кликабельной */
            opacity: 0; 
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            min-height: 250px;  /* Фиксируем высоту для однородности */
            position: relative;
        }
        .module-card:hover {
             transform: translateY(-5px);
             box-shadow: 0 15px 40px rgba(0, 0, 0, 0.35);
        }

        .module-card h4 {
            font-size: 22px;
            font-weight: 700;
            margin-top: 0;
            margin-bottom: 10px;
            color: var(--text-color-dark);
            /* НОВЫЕ СТИЛИ: Ограничение заголовка до 3 строк */
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3; /* Ограничиваем текст тремя строками (для Webkit) */
            line-clamp: 3;          /* ДОБАВЛЕНО: Стандартное свойство для совместимости */
            -webkit-box-orient: vertical;
            text-overflow: ellipsis; /* Добавляем многоточие в конце */
        }

        .module-card .brief-desc {
            font-size: 16px;
            color: #6e6e73;
            margin-bottom: 20px;
            flex-grow: 1; /* Чтобы толкать кнопку вниз */
        }
        
        .module-card .card-footer {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            gap: 15px; 
        }
        
        
        .module-card:nth-child(4n+1) { transition-delay: 0.1s; }
        .module-card:nth-child(4n+2) { transition-delay: 0.2s; }
        .module-card:nth-child(4n+3) { transition-delay: 0.3s; }
        .module-card:nth-child(4n) { transition-delay: 0.4s; }

        /* <<< НОВЫЕ СТИЛИ: ДЛЯ СТРАНИЦЫ ТАРИФОВ >>> */
        .tariff-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 колонки */
            gap: 30px;
            margin-top: 0px; 
            margin-bottom: 80px; 
            grid-auto-rows: 1fr; /* <<< ДОБАВЛЕНО: Карточки будут одинаковой высоты */
        }

        .view-tariffs .tariff-grid {
    margin-top: 5px !important;
}

.view-tariffs .tariff-filter-container {
    margin-bottom: 20px !important;
}

        .tariff-card {
            background-color: rgba(255, 255, 255, 1.0);
            padding: 30px 40px;
            border-radius: 40px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.04);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            text-align: left;
            opacity: 0; 
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .tariff-card:hover {
             transform: translateY(-5px);
             box-shadow: 0 15px 40px rgba(0, 0, 0, 0.35);
        }
        
        .tariff-card h4 {
            font-size: 24px;
            font-weight: 700;
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--text-color-dark);
        }
        
        .tariff-price {
            font-size: 28px;
            font-weight: 600;
            color: #3d3425;
            margin-bottom: 20px;
        }
        
        .tariff-details {
            font-size: 15px;
            color: #6e6e73;
            line-height: 1.7;
            border-top: 1px solid #e0e0e0;
            padding-top: 15px;
        }
        
        .tariff-details p {
            margin: 0 0 10px 0;
        }
        
        .tariff-details strong {
            color: var(--text-color-dark);
            font-weight: 600;
            display: block; /* Делает лейбл над текстом */
            margin-top: 10px;
        }
        
        .tariff-card .card-footer {
            width: 100%;
            display: flex;
            justify-content: flex-end; /* Кнопка справа */
            align-items: center;
            margin-top: 25px;
        }

        /* Задержки для карточек тарифов */
        .tariff-card:nth-child(2n+1) { transition-delay: 0.1s; }
        .tariff-card:nth-child(2n) { transition-delay: 0.2s; }

        /* <<< НОВЫЕ СТИЛИ: ФИЛЬТР ТАРИФОВ >>> */
        .tariff-filter-container {
     display: flex; 
    flex-wrap: nowrap;
    gap: 12px;
    justify-content: center;
    margin-bottom: 40px;
    padding: 20px 15px 25px 15px; /* Увеличиваем паддинги, особенно снизу */
    overflow-x: auto;
    overflow-y: hidden;
    max-width: 100%;
    -webkit-overflow-scrolling: touch;
    position: relative;
    /* Добавляем дополнительное пространство для анимации */
    margin-top: 10px; /* Отступ сверху */
    margin-bottom: 50px; /* Увеличиваем отступ снизу */

}

        .filter-tag {
            /* Внешний вид тега */
            background-color: rgba(255, 255, 255, 0.1);
            color: #f5f5f7;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .filter-tag:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .filter-tag.active {
            background-color: var(--primary-color); /* Используем акцентный цвет для активного тега */
            color: #fff;
            border-color: var(--primary-color);
        }

        .tariff-filter-button {
           background-color: var(--nav-button-bg);
    color: var(--text-color-light);
    border: 1px solid rgba(110, 110, 115, 0.4);
    padding: 15px 25px;
    border-radius: var(--nav-button-border-radius);
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s, transform 0.2s, box-shadow 0.3s;
    backdrop-filter: blur(8px);
    white-space: nowrap;
    flex-shrink: 0; /* Запрещаем сжатие кнопок */
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

                .tariff-filter-button:hover {
                    background-color: #52503b; /* Новый цвет при наведении */
            border-color: #52503b; /* Чтобы граница тоже меняла цвет */
            color: #fff; /* Белый текст для контраста */
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(143, 136, 94, 0.3); /* Тень в тон цвета */
                }

                .tariff-filter-button.active {
                    background-color: #52503b;
            color: #fff;
            border-color: #52503b;
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(143, 136, 94, 0.4);
                }
                /* <<< КОНЕЦ СТИЛЕЙ ФИЛЬТРА >>> */


                /* СТИЛИ ДЛЯ TOAST-УВЕДОМЛЕНИЙ (КОРЗИНА) */
                .toast-container {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    z-index: 3000;
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }
                @keyframes toast-in {
                    from { transform: translateX(110%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                .toast-notification {
                    background-color: #50be3d;
                    color: #ffffff;
                    padding: 15px 20px;
                    border-radius: 10px;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    animation: toast-in 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    gap: 15px;
                    font-weight: 500;
                }
                .toast-close {
                    background: none;
                    border: none;
                    color: white;
                    font-size: 20px;
                    font-weight: bold;
                    cursor: pointer;
                    opacity: 0.7;
                    padding: 0;
                    line-height: 1;
                }
                .toast-close:hover {
                    opacity: 1;
                }

                /* СТИЛИ ДЛЯ МОДАЛЬНОГО ОКНА (ЧЕК) */
                .receipt-items-list {
                    border-top: 1px solid #eee;
                    border-bottom: 1px solid #eee;
                    padding: 15px 0;
                    margin-bottom: 20px;
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }
                .receipt-item {
                    display: flex;
                    justify-content: space-between;
                    font-size: 16px;
                    color: var(--text-color-dark);
                }
                .receipt-item-title {
                    color: #6e6e73;
                    flex: 1;
                    padding-right: 10px;
                }
                .receipt-item-price {
                    font-weight: 600;
                }
                .receipt-total {
                    display: flex;
                    justify-content: space-between;
                    font-size: 20px;
                    font-weight: 700;
                    color: var(--text-color-dark);
                }
                
                
        /* НОВЫЕ СТИЛИ ДЛЯ ПОДВАЛА (Footer-new) */
        .footer-new {
            background: #1d1d1f;
            color: #f5f5f7;
            padding: 40px 0 0;
            font-size: 14px;
            border-top: none;
            position: relative;
            z-index: -1;
            
        }

        .footer-new::before {
            content: '';
            position: absolute;
            top: -50px; /* Высота градиента */
            left: 0;
            width: 100%;
            height: 80px; /* Высота градиента */
            background: linear-gradient(
                to bottom,
                transparent 0%,
                #1d1d1f 100%
            );
            pointer-events: none;
            z-index: 0;
        }

        .footer-content-new {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 колонки */
            gap: 30px;
            padding-bottom: 30px;
            /* Убираем border-bottom который был здесь */
            border-bottom: none;
            position: relative;
            z-index: 1; /* Чтобы контент был поверх тени */
        }

        .footer-column h4 {
            color: #fff;
            font-size: 16px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .footer-column ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-column li {
            margin-bottom: 8px;
        }

        .footer-column a, .contact-info p {
            color: rgba(245, 245, 247, 0.7);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-column a:hover {
            color: var(--primary-color);
        }

        /* Нижний ряд (копирайт) */
        .footer-bottom-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .footer-bottom-row .copyright {
            color: rgba(245, 245, 247, 0.6);
        }

        .footer-bottom-row .legal-links a {
            color: rgba(245, 245, 247, 0.8);
            margin-left: 0 15px;
        }

        .footer-bottom-row .legal-links span {
            color: rgba(245, 245, 247, 0.6);
            margin: 0 10px; 
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .social-icons a {
            transition: opacity 0.3s ease;
            display: flex;
            align-items: center;
            color: rgba(245, 245, 247, 0.7); /* Белый цвет с прозрачностью */
        }

        .social-icons a:hover {
            opacity: 0.7;
            color: rgba(245, 245, 247, 1); /* Полностью белый при наведении */
        }

        .vk-icon svg {
            width: 28px;
            height: 28px;
        }

        /* Адаптивность */
        @media (max-width: 900px) {
            .footer-content-new {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .footer-content-new {
                grid-template-columns: 1fr;
            }
            .footer-bottom-row {
                flex-direction: column;
                text-align: center;
            }
            .footer-bottom-row .legal-links {
                margin-top: 10px;
            }
            .footer-bottom-row .legal-links a {
                margin: 0 5px;
            }
        }
        /* <<< НОВЫЕ СТИЛИ: ФОРМА ОБРАТНОЙ СВЯЗИ >>> */
        .contact-section-container {
            background-color: #fff; /* Белый фон для формы */
            border-radius: 40px;
            padding: 50px 60px;
            margin-top: 80px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            opacity: 0; 
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .contact-section-container h3 {
            font-size: 40px; 
            font-weight: 600; 
            color: var(--text-color-dark); /* Темный текст на белом фоне */
            text-align: center;
            margin-top: 0;
            margin-bottom: 0 px;
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-group {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-size: 14px;
            font-weight: 500;
            color: #6e6e73;
            margin-bottom: 8px;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            font-size: 16px;
            font-family: var(--font-family);
            border: 1px solid #d2d2d7;
            border-radius: 12px;
            box-sizing: border-box; /* Важно для padding */
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .form-input:focus,
        .form-textarea:focus {
            outline: none;
    border-color: #5c5c5e;
    box-shadow: 0 0 0 3px rgba(92, 92, 94, 0.3); /* Тень цвета #5c5c5e */

        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .form-submit-button {
            background-color: #5c5c5e;
            color: #fff;
            padding: 12px 25px; 
            border: none;
            border-radius: 999px;
            font-size: 16px; 
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s, box-shadow 0.3s;
            text-decoration: none;
            white-space: nowrap;
            align-self: flex-end; /* Кнопка справа */
            margin-top: 10px;
        }
        
        .form-submit-button:hover {
            background-color: #16435a;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 113, 227, 0.4);
        }
        /* <<< КОНЕЦ СТИЛЕЙ ФОРМЫ >>> */

/* <<< НОВЫЕ СТИЛИ: БЛОК КОНТАКТОВ (ДЛЯ ВЫРАВНИВАНИЯ КАРТЫ) >>> */
        .contact-details-block {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #d2d2d7; /* Разделитель от формы */
            color: var(--text-color-dark);
            
            /* Flex layout для двух колонок */
            display: flex;
            gap: 40px; 
            flex-wrap: wrap; 
            align-items: flex-start; /* Выравнивает колонки по верхнему краю */
        }
        
        .contact-details-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-color-dark);
            margin-top: 0;
            margin-bottom: 25px;
            text-align: left; 
            /* Свойство width: 100% удалено, чтобы заголовок был внутри колонки */
        }

        .contact-info-column {
            flex: 1 1 45%; 
            min-width: 300px; 
        }

        .map-column {
            flex: 1 1 45%; 
            min-width: 300px; 
            height: 300px; 
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .map-column iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        .contact-details-item {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 16px;
            color: #6e6e73; 
            margin-bottom: 15px;
        }
        
        .contact-details-item span.material-symbols-rounded {
            color: #0c6aa7;
            font-size: 24px;
        }
        
        .contact-details-item a {
            text-decoration: none;
            color: #0c6aa7;
            font-weight: 500;
            transition: opacity 0.3s;
        }
        
        .contact-details-item a:hover {
            opacity: 0.7;
        }
        /* <<< КОНЕЦ СТИЛЕЙ БЛОКА КОНТАКТОВ >>> */

        /* === НОВЫЕ СТИЛИ: ДИНАМИЧЕСКИЙ ФОН ДЛЯ BODY === */
        body.view-home {
            background-image: url('hero-bg.jpg');
        }

        /* Фон для страницы Модулей */
        body.view-modules {
            background-image: url('Apple-Restore-Fund-California-redwoods_big.jpg.large_2x.jpg');
        }

        /* Фон для страницы Тарифов */
        body.view-tariffs {
            background-image: url('Apple-Restore-Fund-California-redwoods_big.jpg.large_2x.jpg');
        }

        /* Фон для страницы Корзины */
        body.view-cart {
            background-image: url('people_conserve_boc__fujufs0ee7m2_large_2x.jpg');
        }
        /* === КОНЕЦ СТИЛЕЙ ФОНА === */

        .stub-link {
    color: rgba(245, 245, 247, 0.7);
    text-decoration: none;
    cursor: default; /* Не кликабельно */
        }
        /* Стиль для заглушек в нижнем ряду подвала */
        .stub-link-legal {
            color: rgba(245, 245, 247, 0.6);
            margin: 0 15px; 
            cursor: default;
        }

        /* ИСПРАВЛЕНИЕ: Корректируем стиль для настоящих ссылок внизу */
        .footer-bottom-row .legal-links a {
            color: rgba(245, 245, 247, 0.6);
            margin: 0 15px; /* Исправлена ошибка (было margin-left) */
        }

                /* <<< НОВЫЕ СТИЛИ: ДЛЯ ТИПА ОПЛАТЫ В ТАРИФАХ >>> */
        .tariff-price {
            /* Уменьшаем отступ, так как описание будет под ценой */
            margin-bottom: 10px; 
        }

        .tariff-payment-type-display {
            display: block; /* С новой строки */
            font-size: 16px;
            font-weight: 500;
            color: #6e6e73; /* Менее яркий, чем цена */
            margin-top: 5px;
        }

    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ДАННЫЕ (без изменений, кроме добавления большего количества партнеров) ---
            const slideshowData = [
            { 
                id: 1, 
                title: "Наша Миссия", 
                /* ИЗМЕНЕНИЕ: Добавлен перенос строки */
                text: "Создать новую систему цифрового доверия, которая приходит на смену традиционным централизованным решениям. Мы предоставляем модульную экосистему для гарантии достоверности данных без передачи вашей конфиденциальной информации." 
            },
            { 
                id: 2, 
                title: "Акция месяца", 
                text: "Скидка 10% на все тарифы для новых клиентов. Успейте до конца месяца.", 
                openModal: true, 
                details: "<strong>Специальные предложения:</strong><ul><li>Получите 3 месяца использования в подарок при оформлении годовой подписки на любой тариф. Ваша общая экономия составит 25% (931 500₽ за 15 месяцев).</li><li>Все новые клиенты получают скидку 10% на первую покупку любого тарифа.</li><li>Совершите первые 5000 транзакций абсолютно бесплатно, чтобы оценить скорость и надежность нашей платформы.</li></ul>"
            },

            { 
                id: 3, 
                /* ИЗМЕНЕНИЕ: Добавлен span с цветом */
                title: "Новый Тариф <span style='color: #345c7c;'>AI Fortress</span>", 
                text: "Максимальная защита данных на базе блокчейна, усиленная интеллектуальной системой ИИ для проактивного мониторинга и мгновенного реагирования на киберугрозы.", 
                linkTo: "#модули" 
            },
            { 
                id: 4, 
                title: "Специальное предложение", 
                text: "Бесплатная установка и настройка всех систем Prime Fort для новых клиентов!", linkTo: "#модули" } // Убран якорь #тарифы
        ];
        const keyProductsData = [
            { 
                id: 101, 
                title: "Core Secure", 
                text: "Фундаментальный пакет, обеспечивающий неизменяемую верификацию, логирование и безопасный контроль доступа, без которого невозможна работа экосистемы.",
                details: "Core Secure — это основа вашей цифровой безопасности и доверия. Он обеспечивает ключевую безопасность данных, верификацию и контроль доступа, гарантируя неизменность всех действий пользователей. Пакет включает механизмы аутентификации и шифрования (AES-256, TLS 1.3), модуль управления правами и ролями (Governance Layer), а также неизменяемые логи действий. Все данные контролируются через хранение хэшей (Merkle Tree), что является обязательным условием для безопасного обмена информацией и придания юридической силы записям.",
                price: 15000 
            },
            { 
                id: 102, 
                title: "Legal Trust", 
                text: "Пакет, придающий всем цифровым действиям и документам юридическую силу благодаря поддержке ЭЦП и смарт-контрактов.",
                details: "Legal Trust переводит ваши цифровые активы в плоскость законного оборота. Без этого пакета данные не имеют юридического статуса. Он формирует доказательную базу и гарантирует юридическую силу всех цифровых действий и документов. Пакет включает смарт-контракты для автоматизации лицензий и соглашений, полную поддержку ЭЦП и цифровых меток времени, а также контролируемое хранение хэшей юридических документов для подтверждения их целостности.",
                price: 22000
            },
            { 
                id: 103, 
                title: "SmartFinance", 
                text: "Модуль для автоматизации финансовых расчетов, сверки данных и контроля обязательств с помощью прозрачных и проверяемых смарт-контрактов.",
                details: "SmartFinance идеален для компаний с большим объемом транзакций, поставок и взаиморасчетов, так как отвечает за полную автоматизацию финансовых обязательств. Он делает взаимодействие с партнерами прозрачным, исключает ошибки и экономит время. Пакет включает смарт-контракты для расчетов и соглашений об уровне обслуживания, поддержку приватных каналов транзакций и возможности токенизации. Дополнительно предусмотрен API для бесшовной интеграции с вашими системами бухгалтерии, ERP и CRM.",
                price: 8500
            },
            { 
                id: 104, 
                title: "Больше возможностей", 
                text: "Полный каталог тарифов здесь", 
                linkTo: "#каталог-модулей" 
            }
        ];
        const modulesData = [
            {
                id: 201, title: "Контроль версий (Version Control)", 
                brief: "Регистрирует версии всех цифровых активов и обеспечивает возможность проверки их целостности на любом этапе.",
                price: 12000,
                details: "Модуль фиксирует каждую версию файла или объекта, используя криптографические хэши. Он предоставляет доказательство целостности (Merkle-proof), поддерживает откат к предыдущим версиям и отслеживает полную историю изменений (lineage)."
            },
            {
                id: 202, title: "Защита ИС (IP Protection)", 
                brief: "Модуль нотаризации интеллектуальной собственности, который фиксирует авторство и управляет правами на блокчейне.",
                price: 18000,
                details: "Обеспечивает нотаризацию R&D, доказательства авторства и управление правами интеллектуальной собственности (IP). Фиксирует хэши исходников и чертежей на блокчейне, предоставляя длительную верификацию подлинности и статус лицензии."
            },
            {
                id: 203, title: "Управление правами и ролями (Governance)", 
                brief: "Управляет доступом, ролями пользователей и узлов, обеспечивая соблюдение внутренних и внешних политик комплаенса.",
                price: 9500,
                details: "Отвечает за настройку политик доступа, ролей пользователей и узлов в соответствии с Governance Layer. Он управляет сертификатами и ключами доступа, а также контролирует соблюдение правил использования платформы."
            },
            {
                id: 204, title: "События и инциденты безопасности (SIEM/Logs)", 
                brief: "Сбор доказательств соответствия (ISO, GDPR), формирование audit trail, автоматизация проверок и отчётов.",
                price: 14500,
                details: "Модуль выполняет функции системы управления событиями безопасности (SIEM). Он обеспечивает неизменяемое хранение логов, фиксацию действий пользователей и событий безопасности, а также контроль целостности журналов."
            },
            {
                id: 205, title: "Верификация происхождения (Data Provenance)", 
                brief: "Гарантирует контроль источника данных, их маршрута и достоверности с момента создания до использования.",
                price: 16000,
                details: "Обеспечивает Data Trust Layer, проверяя достоверность и контролируя происхождение данных. Модуль фиксирует весь жизненный цикл данных, позволяя любому уполномоченному участнику проверить их целостность при передаче."
            },
            {
                id: 206, title: "Управление лицензиями и монетизация", 
                brief: "Позволяет выпускать лицензии, управлять подписками и монетизировать данные через смарт-контракты.",
                price: 11000,
                details: "Управляет жизненным циклом продукта, включая выпуск лицензий, монетизацию данных и управление подписками. Все процессы автоматизированы через смарт-контракты, что обеспечивает прозрачность и автоматические выплаты."
            },
            {
                id: 207, title: "Смарт-контракты (Smart Contract Engine)", 
                brief: "Движок для разработки и автоматического выполнения бизнес-логики, включая SLA и escrow-счета.",
                price: 19000,
                details: "Предназначен для разработки, развертывания и выполнения бизнес-логики в децентрализованной среде. Используется для автоматизации соглашений (SLA), депозитных счетов (escrow), автоматических выплат и других сложных юридических процессов."
            },
            {
                id: 208, title: "Финансовые транзакции и расчёты", 
                brief: "Обеспечивает проведение безопасных транзакций, автоматическую сверку расчётов и интеграцию с финансовыми системами.",
                price: 13500,
                details: "Модуль для финансового сегмента, отвечающий за прозрачные и проверяемые расчёты. Предоставляет приватные каналы для транзакций и API для автоматической сверки данных с бухгалтерией, ERP и CRM-системами."
            },
            {
                id: 209, title: "Интеграция с IoT и Edge", 
                brief: "Подключает сенсоры и IoT-устройства, фиксируя их телеметрию и аутентификацию на блокчейне.",
                price: 17000,
                details: "Обеспечивает Integration Layer для подключения внешних устройств, датчиков и IoT-шлюзов. Каждый датчик аутентифицируется, а его данные (телеметрия) фиксируются на блокчейне с меткой времени для обеспечения достоверности."
            },
            {
                title: "Интеграция с AI/ML", 
                brief: "Provenance данных и моделей, верифицируемые расчёты, хранение fingerprint’ов и версий моделей.",
                price: 21000,
                details: "Обеспечивает безопасный обмен данными для обучения и использования моделей ИИ/ML. Модуль верифицирует сами модели и их результаты, защищая от подмены и обеспечивая доверие к аналитическим выводам."
            },
            {
                id: 211, title: "Аналитика и отчётность (Analytics)", 
                brief: "Формирует доверенные, защищённые от подделки аналитические отчёты, подтвержденные хэшем в блокчейне.",
                price: 21000,
                details: "Отвечает за проверяемую аналитику, формирование отчётов и дашбордов для партнёров. Хэш каждого отчёта публикуется в блокчейне, гарантируя, что результат анализа не был изменен после его публикации."
            },
            {
                id: 212, title: "API и Административный центр", 
                brief: "Предоставляет универсальный API для интеграции и удобный Web-интерфейс для управления всей экосистемой.",
                price: 15500,
                details: "Включает внешние интерфейсы (REST API, GraphQL) для обмена данными с приложениями партнёров. Административный центр — это Web-Dashboard для настройки пользователей, политик доступа, лицензий и мониторинга состояния всей сети."
            }
        ];
        const partnerLogos = [
            { id: 8, name: "Astra Linux", image: "astra.png" }, 
            { id: 9, name: "Space", image: "l22.png" },
            { id: 10, name: "Sberbank", image: "Logo_Sberbank.svg.png" },
            { id: 11, name: "LF Decentralized Trust Labs", image: "LF Decentralized Trust Labs.png" },
            { id: 12, name: "Сотби", image: "hor-e1648738931937.png" },
            { id: 13, name: "BGP Litigation", image: "l11.jpg" },
            { id: 14, name: "Hyperledger Identus", image: "Hyperledger_Identus.svg" },
            { id: 15, name: "Besu", image: "Besu.svg" },
            { id: 16, name: "Hyperledger Fabric", image: "Hyperledger_Fabric.svg" },
        ];

        // <<< НОВЫЕ ДАННЫЕ: ТАРИФНЫЕ ПАКЕТЫ С КАТЕГОРИЯМИ И ТИПОМ ОПЛАТЫ >>>
        const tariffsData = [
            {
                id: 301,
                title: "Core Secure (Базовый уровень безопасности)",
                modules: "Контроль версий, Управление правами, Кибербезопасность и доверенные логи.",
                dependency: "Обязательный для всех",
                idea: "Обязательная основа платформы, обеспечивающая неизменяемую верификацию, шифрование и контроль доступа. Является фундаментом для всех последующих модулей и гарантирует базовую безопасность.",
                audience: "Все клиенты (основа платформы)",
                format: "SaaS или on-prem",
                advantages: "Гарантированная неизменность логов; соответствие базовым требованиям к безопасности; обеспечивает юридическую силу транзакций; обязательный старт для всех клиентов.",
                price: 103500,
                paymentType: "Месячная Подписка", // <-- ИЗМЕНЕНИЕ
                category: "base_security"
            },
            {
                id: 302,
                title: "Legal Trust (Юридический и лицензионный)",
                modules: "Защита ИС, Юридическая документация, Монетизация.",
                dependency: "Требует Core Secure",
                idea: "Обеспечение юридической значимости, управление лицензиями и защита интеллектуальной собственности. Превращает цифровые активы в доказательную базу.",
                audience: "Юридические компании, IT-компании, авторы контента",
                format: "Облако / гибрид",
                advantages: "Доказуемость авторства и защита прав; автоматизация лицензирования; юридическая достоверность всех контрактов и документов.",
                price: 983250,
                paymentType: "Разовая Лицензия", // <-- ИЗМЕНЕНИЕ
                category: "finance_legal"
            },
            {
                id: 303,
                title: "Compliance Pro (Аудит и соответствие)",
                modules: "Соответствие стандартам, Кибербезопасность (из Core), Транзакции аудита.",
                dependency: "Требует Core Secure",
                idea: "Контроль за соблюдением внутренних политик и международных стандартов (ISO, GDPR). Автоматическая фиксация всех действий для аудита.",
                audience: "Финансовый и промышленный сектор",
                format: "On-prem / гибрид",
                advantages: "Ускорение прохождения регуляторного аудита; проверяемость действий сотрудников; автоматическая фиксация отчётов и соответствие стандартам.",
                price: 1345500,
                paymentType: "Годовая Подписка", // <-- ИЗМЕНЕНИЕ
                category: "base_security"
            },
            {
                id: 304,
                title: "SmartFinance (Финансовые транзакции)",
                modules: "Смарт-контракты, Данные транзакций, Монетизация.",
                dependency: "Требует Core Secure",
                idea: "Автоматизация договоров, расчетов и платежей через смарт-контракты. Обеспечивает прозрачность финансовых операций, исключая ошибки и задержки.",
                audience: "Банки, финтех, маркетплейсы",
                format: "Приватная сеть",
                advantages: "Автоматические прозрачные выплаты; токенизация активов; быстрая интеграция с финансовыми системами; гарантированное исполнение SLA.",
                price: 13196,
                paymentType: "Плата за Транзакцию (месячный расчет 50000 транзакций)", // <-- ИЗМЕНЕНИЕ
                category: "finance_legal"
            },
            {
                id: 305,
                title: "Industrial Secure IoT (Индустриальный IoT)",
                modules: "Кибербезопасность, Интеграция с промышленным интернетом вещей, Беспроводные технологии.",
                dependency: "Требует Core Secure",
                idea: "Специализированный пакет для защиты промышленных IoT-устройств, телеметрии и SCADA-систем. Обеспечирует контроль подключений и достоверность данных с датчиков.",
                audience: "Заводы, энергетика, логистика",
                format: "On-prem + облако",
                advantages: "Контроль и аутентификация IoT-устройств; неизменяемая фиксация телеметрии; защита каналов связи в индустриальной среде.",
                price: 9315,
                paymentType: "Плата за Устройство (годовой расчет за 1 устройство)", // <-- ИЗМЕНЕНИЕ
                category: "industry"
            },
            {
                id: 306,
                title: "AI Fortress (Безопасный ИИ)",
                modules: "Защита ИС, Совместимость с ИИ, Контроль версий (из Core).",
                dependency: "Требует Core Secure",
                idea: "Решение для обеспечения доверия к моделям ИИ. Фиксация происхождения данных для обучения и защита самих моделей от несанкционированных изменений.",
                audience: "AI-компании, исследовательские центры",
                format: "Облако / гибрид",
                advantages: "Контроль версий и аудит моделей ИИ; защита алгоритмов; этический аудит и фиксация происхождения обучающих данных.",
                price: 1164375,
                paymentType: "Годовая Подписка", // <-- ИЗМЕНЕНИЕ
                category: "ai_analytics"
            },
            {
                id: 307,
                title: "Data Integrity (Доверие к данным)",
                modules: "Контроль версий, Кибербезопасность (из Core), Data Trust Layer.",
                dependency: "Требует Core Secure",
                idea: "Обеспечение максимальной подлинности и целостности критически важных данных. Создает слой доверия (Data Trust Layer), проверяя каждый фрагмент информации.",
                audience: "Все компании с критичными данными",
                format: "Облако / API",
                advantages: "Проверка целостности данных в реальном времени; предотвращение подмены информации; полный контроль истории изменений.",
                price: 9056,
                paymentType: "Плата за Транзакцию (месячный расчет 50000 транзакций)", // <-- ИЗМЕНЕНИЕ
                category: "base_security"
            },
            {
                id: 308,
                title: "Enterprise Suite (Корпоративная экосистема)",
                modules: "Все 12 модулей (Полный функционал).",
                dependency: "Включает Core Secure",
                idea: "Комплексный пакет, включающий все модули экосистемы. Предназначен для крупных корпораций, которым требуется полный функционал, централизованное управление и максимальное соответствие требованиям.",
                audience: "Крупные предприятия",
                format: "On-prem / облако",
                advantages: "Комплексное управление безопасностью и доверием; полный функционал (IoT, Юриспруденция, ИИ, Финансы); максимальная гибкость и масштабируемость.",
                price: 31050000,
                paymentType: "Разовая Лицензия", // <-- ИЗМЕНЕНИЕ
                category: "enterprise"
            },
            {
                id: 309,
                title: "Vertical Custom (Отраслевой модуль)",
                modules: "Контроль версий, Кибербезопасность, Интеграция с промышленным интернетом вещей, Совместимость с ИИ, а также отраслевые модули (13-й модуль).",
                dependency: "Требует Core Secure",
                idea: "Индивидуальный пакет, настраиваемый под уникальную специфику конкретной отрасли (например, медицина, энергетика, строительство). Включает интеграцию с отраслевым ПО.",
                audience: "Отраслевые предприятия",
                format: "Гибрид",
                advantages: "Глубокая интеграция с цифровыми двойниками (CAD, PLM); максимальное соответствие узкоспециализированным регуляторным нормам; адаптация к уникальной архитектуре заказчика.",
                price: 14438250, 
                paymentType: "Разовая Лицензия", // <-- ИЗМЕНЕНИЕ
                category: "industry"
            },
            {
                id: 310,
                title: "Analytics+ (Проверяемая аналитика)",
                modules: "Контроль версий, ИИ, Data Trust Layer.",
                dependency: "Требует Core Secure",
                idea: "Создание проверяемых и защищённых от подделки аналитических отчётов. Позволяет обмениваться выводами аналитики с партнерами, не раскрывая при этом сырые данные.",
                audience: "Бизнес-аналитика, консалтинг, финансы",
                format: "SaaS",
                advantages: "Проверяемые отчёты, подтвержденные блокчейном; защищённые аналитические модели; возможность делиться выводами без раскрытия конфиденциальной информации.",
                price: 802125,
                paymentType: "Годовая Подписка", // <-- ИЗМЕНЕНИЕ
                category: "ai_analytics"
            }
        ];

        // Компонент логотипа для шапки (без изменений)
        const HeaderLogo = () => (
            <div className="logo-svg">
                <svg 
                    viewBox="0 0 580 530" 
                    preserveAspectRatio="xMidYMid meet"
                    width="50" 
                    height="50"
                    style={{display: 'block'}}
                >
                    <path
                        fill="none"
                        stroke="#ffffff"
                        strokeWidth="5"
                        d="M 182.0679,6 H 461.47901 А 102.02099,102.02099 45 0 1 563.5,108.02099 V 390.14076 А 92.859245,92.859245 135 0 1 470.64076,483 H 156.68148 А 89.181481,89.181481 45 0 1 67.5,393.81852 V 120.5679 А 114.5679,114.5679 135 0 1 182.0679,6 Z"
                        transform="matrix(0.9835492,0,0,0.93097955,10.111696,14.114348)"
                        style={{fill: '#1d1d1f', fillOpacity: 0, stroke: '#ffffff', strokeOpacity: 1}}
                    />
                    <g transform="rotate(90,312.78,244.26)">
                        <circle cx="207.27" cy="275.91" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                        <circle cx="126.36" cy="365.9" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                        <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="208.18" x2="208.18" y1="298.64" y2="367.61" />
                        <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="143.64" x2="207.79" y1="367.73" y2="367.73" />
                        <circle cx="171.82" cy="416.08" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                        <circle cx="485.11" cy="420.61" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                        <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15.211" x1="190.51" x2="460.88" y1="417.91" y2="417.91" />
                        <circle cx="285" cy="276.81" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                        <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="285" x2="285" y1="301.36" y2="367.45" />
                        <line fill="none" stroke="#ffffff" strokeLinejoin="bevel" strokeWidth="15" x1="285.04" x2="412.34" y1="367.73" y2="367.73" />
                        <circle cx="485.2" cy="368.41" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="1ANVdGz3M5s" r="17.27" />
                        <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="248.63" x2="412.91" y1="392.27" y2="392.27" />
                        <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="247.12" x2="247.12" y1="341.81" y2="392.13" />
                        <circle cx="246.52" cy="317.72" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                        <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="437.89" x2="462.07" y1="371.29" y2="371.29" />
                        <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="436.11" x2="415.96" y1="372.59" y2="392.37" />
                    </g>
                    <text 
                        transform="translate(-30.244895,291.88531)"
                        style={{fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'bold', fontStretch: 'normal', fontSize: '266.667px', fontFamily: 'Trebuchet MS', fill: '#ffffff', fillOpacity: 0.975, stroke: '#ffffff', strokeWidth: 1}}
                    >
                        <tspan x="260.74023" y="147.89545">P</tspan>
                    </text>
                    <text 
                        transform="translate(112.84584,293.88531)"
                        style={{fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'bold', fontStretch: 'normal', fontSize: '266.667px', fontFamily: 'Trebuchet MS', fill: '#ffffff', fillOpacity: 0.975, stroke: '#ffffff', strokeWidth: 1}}
                    >
                        <tspan x="260.74023" y="147.89545">F</tspan>
                    </text>
                    <text x="320.93" y="199.55" style={{fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'bold', fontStretch: 'normal', fontSize: '200px', fontFamily: 'Trebuchet MS', fill: '#ffffff', fillOpacity: 0.975, stroke: '#ffffff', strokeWidth: 1}}>
                        <tspan x="320.93" y="199.55" style={{fontSize: '200px'}}>01</tspan>
                    </text>
                </svg>
            </div>
        );
        
        // <<< ИЗМЕНЕНИЕ: Header теперь принимает onShowHome и onShowTariffs >>>
        const Header = ({ onShowCart, cartCount, onShowModules, onShowTariffs, onNavigateToHomeAnchor, currentView, onShowHome }) => {
    
    const handleAnchorClick = (e, anchorId) => {
        if (currentView !== 'home') {
            e.preventDefault(); 
            onNavigateToHomeAnchor(anchorId); 
        }
    };

    const handleLogoClick = () => {
        onShowHome();
    };

    return (
        <header className="header">
            <div className="logo" onClick={handleLogoClick}>
                <div className="logo-svg">
                    <svg 
                        viewBox="0 0 580 530" 
                        preserveAspectRatio="xMidYMid meet"
                        width="50" 
                        height="50"
                        style={{display: 'block'}}
                    >
                        <path
                            fill="none"
                            stroke="#ffffff"
                            strokeWidth="5"
                            d="M 182.0679,6 H 461.47901 A 102.02099,102.02099 45 0 1 563.5,108.02099 V 390.14076 A 92.859245,92.859245 135 0 1 470.64076,483 H 156.68148 A 89.181481,89.181481 45 0 1 67.5,393.81852 V 120.5679 A 114.5679,114.5679 135 0 1 182.0679,6 Z"
                            transform="matrix(0.9835492,0,0,0.93097955,10.111696,14.114348)"
                            style={{fill: '#1d1d1f', fillOpacity: 0, stroke: '#ffffff', strokeOpacity: 1}}
                        />
                        <g transform="rotate(90,312.78,244.26)">
                            <circle cx="207.27" cy="275.91" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                            <circle cx="126.36" cy="365.9" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                            <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="208.18" x2="208.18" y1="298.64" y2="367.61" />
                            <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="143.64" x2="207.79" y1="367.73" y2="367.73" />
                            <circle cx="171.82" cy="416.08" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                            <circle cx="485.11" cy="420.61" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                            <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15.211" x1="190.51" x2="460.88" y1="417.91" y2="417.91" />
                            <circle cx="285" cy="276.81" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                            <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="285" x2="285" y1="301.36" y2="367.45" />
                            <line fill="none" stroke="#ffffff" strokeLinejoin="bevel" strokeWidth="15" x1="285.04" x2="412.34" y1="367.73" y2="367.73" />
                            <circle cx="485.2" cy="368.41" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                            <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="248.63" x2="412.91" y1="392.27" y2="392.27" />
                            <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="247.12" x2="247.12" y1="341.81" y2="392.13" />
                            <circle cx="246.52" cy="317.72" fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" r="17.27" />
                            <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="437.89" x2="462.07" y1="371.29" y2="371.29" />
                            <line fill="none" stroke="#ffffff" strokeLinecap="round" strokeLinejoin="bevel" strokeWidth="15" x1="436.11" x2="415.96" y1="372.59" y2="392.37" />
                        </g>
                        
                        {/* Буква P */}
                        <text 
                            transform="translate(-30.244895,291.88531)"
                            style={{fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'bold', fontStretch: 'normal', fontSize: '266.667px', fontFamily: 'Trebuchet MS', fill: '#ffffff', fillOpacity: 0.975, stroke: '#ffffff', strokeWidth: 1}}
                        >
                            <tspan x="260.74023" y="147.89545">P</tspan>
                        </text>
                        
                        {/* Буква F */}
                        <text 
                            transform="translate(112.84584,293.88531)"
                            style={{fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'bold', fontStretch: 'normal', fontSize: '266.667px', fontFamily: 'Trebuchet MS', fill: '#ffffff', fillOpacity: 0.975, stroke: '#ffffff', strokeWidth: 1}}
                        >
                            <tspan x="260.74023" y="147.89545">F</tspan>
                        </text>
                        
                        {/* Цифры 01 */}
                        <text x="320.93" y="199.55" style={{fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'bold', fontStretch: 'normal', fontSize: '200px', fontFamily: 'Trebuchet MS', fill: '#ffffff', fillOpacity: 0.975, stroke: '#ffffff', strokeWidth: 1}}>
                            <tspan x="320.93" y="199.55" style={{fontSize: '200px'}}>01</tspan>
                        </text>
                    </svg>
                </div>
                <span className="logo-text">Prime∙Fort</span>
            </div>

            <nav className="nav-links-container">
                {['О нас', 'Модули', 'Тарифы', 'Партнерство', 'Контакты'].map(link => {
                    
                    // "Модули" - переключатель вида
                    if (link === 'Модули') {
                        return (
                            <a 
                                className="nav-link" 
                                key={link} 
                                onClick={onShowModules}
                                style={{cursor: 'pointer'}} 
                            >
                                {link}
                            </a>
                        );
                    }
                    
                    // "Тарифы" - тоже переключатель вида
                    if (link === 'Тарифы') {
                        return (
                            <a 
                                className="nav-link" 
                                key={link} 
                                onClick={onShowTariffs}
                                style={{cursor: 'pointer'}} 
                            >
                                {link}
                            </a>
                        );
                    }
                    
                    // Остальные - якоря
                    const anchorId = link.toLowerCase().replace(' ', '-'); 

                    return (
                        <a 
                            href={`#${anchorId}`} 
                            className="nav-link" 
                            key={link}
                            onClick={(e) => handleAnchorClick(e, anchorId)} 
                        >
                            {link}
                        </a>
                    );
                })}
               
                <span className="cart-icon" title="Корзина" onClick={onShowCart}>
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor">
                        <path fillRule="evenodd" clipRule="evenodd" d="M3 5v1.109l3.318.18 3.932 15.713 9.473-1.891c3.274-.637 4.91-.955 6.074-1.898a6 6 0 0 0 1.507-1.822c.6-1.115.674-3.244.69-5.89l.004-1.04L28 9l-18 .137H8.574L7.506 5H3Zm7.419 18.497a2.749 2.749 0 0 0-4.868 1.755 2.75 2.75 0 1 0 4.868-1.755Zm-1.466-12.86 2.405 9.614 8.078-1.612c1.663-.324 2.815-.55 3.701-.804.863-.248 1.35-.492 1.715-.787a4.5 4.5 0 0 0 1.13-1.366c.188-.349.351-1.07.434-2.33.055-.83.071-1.778.078-2.84L10 10.636H8.953ZM8.3 26.501a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Zm12.967 0a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Zm0 1.5a2.75 2.75 0 1 0 0-5.5 2.75 2.75 0 0 0 0 5.5Z"></path>
                    </svg>
                    {cartCount > 0 && <span className="cart-badge">{cartCount}</span>}
                </span>
            </nav>
        </header>
    );
};


        const ScrollFadeOverlay = () => (
            <div className="scroll-fade-overlay"></div>
        );

        // Компонент AnimateOnScroll (без изменений)
        const AnimateOnScroll = ({ children }) => {
            const [isVisible, setIsVisible] = useState(false);
            const ref = useRef(null);

            useEffect(() => {
                if (isVisible) return;
                
                const currentRef = ref.current;
                if (!currentRef) return; 

                const observer = new IntersectionObserver(
                    (entries) => {
                        const [entry] = entries;
                        if (entry.isIntersecting) {
                            setIsVisible(true);
                            observer.unobserve(entry.target);
                        }
                    },
                    { threshold: 0.1 }
                );
                
                observer.observe(currentRef);
                
                return () => { 
                    if (currentRef) {
                        observer.unobserve(currentRef);
                    }
                };
            }, [isVisible]);

            const childClassName = children.props.className || '';
            const newClassName = `${childClassName} ${isVisible ? 'is-visible' : ''}`;

            return React.cloneElement(children, { ref: ref, className: newClassName });
        };

        // --- КОМПОНЕНТ: ИНТЕРАКТИВНЫЙ ГРАФ (D3 Force Simulation) ---
        const ForceGraph = () => {
            const svgRef = useRef();
            const width = 300;
            const height = 300;
            const padding = 10; // Отступ от границ

            useEffect(() => {
                if (!svgRef.current) return;

                const svg = d3.select(svgRef.current)
                              .attr("width", width)
                              .attr("height", height);

                // Очистка SVG
                svg.selectAll("*").remove();
                
                const nodesData = [
                    { id: "PF", group: 1, name: "Prime Fort", color: '#4CAF50' }, 
                    { id: "Cyber", group: 2, name: "Safety", color: '#f5f5f7' },
                    { id: "Physical", group: 2, name: "Protection", color: '#f5f5f7' },
                    { id: "Data", group: 2, name: "Data", color: '#f5f5f7' },
                    { id: "AI", group: 2, name: "AI/Analytics", color: '#f5f5f7' },
                    { id: "NodeA", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeB", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeC", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeD", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeE", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeF", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeG", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeH", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeI", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeJ", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeK", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeL", group: 3, name: "", color: '#f5f5f7' },
                    { id: "NodeM", group: 3, name: "", color: '#f5f5f7' },
                    { id: "Green1", group: 4, name: "", color: '#4CAF50' }, 
                    { id: "Green2", group: 4, name: "", color: '#4CAF50' },
                    { id: "Green3", group: 4, name: "", color: '#4CAF50' },
                    { id: "Green4", group: 4, name: "", color: '#4CAF50' },
                ];

                const linksData = [
                    { source: "PF", target: "Cyber" }, { source: "PF", target: "Physical" },
                    { source: "PF", target: "Data" }, { source: "PF", target: "AI" },
                    { source: "Cyber", target: "AI" }, { source: "Physical", target: "Data" },
                    { source: "Data", target: "Cyber" }, { source: "Cyber", target: "NodeA" },
                    { source: "Cyber", target: "NodeB" }, { source: "Physical", target: "NodeC" },
                    { source: "Physical", target: "NodeD" }, { source: "Data", target: "NodeE" },
                    { source: "AI", target: "NodeF" }, { source: "NodeA", target: "NodeB" },
                    { source: "NodeA", target: "NodeG" }, { source: "NodeG", target: "NodeH" },
                    { source: "NodeH", target: "NodeI" }, { source: "NodeI", target: "NodeJ" },
                    { source: "NodeC", target: "NodeD" }, { source: "NodeC", target: "NodeE" },
                    { source: "NodeF", target: "NodeJ" }, { source: "NodeK", target: "NodeL" },
                    { source: "NodeL", target: "NodeM" }, { source: "NodeM", target: "NodeA" },
                    { source: "NodeK", target: "Physical" }, { source: "PF", target: "Green1" },
                    { source: "Cyber", target: "Green2" }, { source: "Data", target: "Green3" },
                    { source: "Physical", target: "Green4" }, { source: "NodeI", target: "Green1" },
                    { source: "NodeJ", target: "Green4" },
                ];
                
                const simulation = d3.forceSimulation(nodesData)
                    .force("link", d3.forceLink(linksData).id(d => d.id).distance(40).strength(0.5)) 
                    .force("charge", d3.forceManyBody().strength(-100)) 
                    .force("center", d3.forceCenter(width / 2, height / 2)) 
                    .force("x", d3.forceX(width / 2).strength(0.05))
                    .force("y", d3.forceY(height / 2).strength(0.05));

                const link = svg.append("g")
                    .attr("class", "graph-link-group")
                    .selectAll("line")
                    .data(linksData)
                    .join("line")
                    .attr("class", "graph-link"); 

                const node = svg.append("g")
                    .attr("class", "graph-node-group")
                    .selectAll("g")
                    .data(nodesData)
                    .join("g")
                    .call(drag(simulation)); 

                node.append("circle")
                    .attr("r", d => d.group === 1 ? 12 : (d.group === 2 ? 8 : (d.group === 4 ? 6 : 4)))
                    .attr("fill", d => d.color)
                    .attr("class", "graph-node");

                node.filter(d => d.name.length > 0).append("text")
                    .attr("dx", 10) 
                    .attr("dy", ".31em")
                    .text(d => d.name)
                    .attr("font-size", d => d.group === 1 ? 14 : 10)
                    .attr("class", "node-text");

                simulation.on("tick", () => {
                    nodesData.forEach(d => {
                        d.x = Math.max(padding, Math.min(width - padding, d.x));
                        d.y = Math.max(padding, Math.min(height - padding, d.y));
                    });
                    
                    link
                        .attr("x1", d => d.source.x)
                        .attr("y1", d => d.source.y)
                        .attr("x2", d => d.target.x)
                        .attr("y2", d => d.target.y);

                    node.attr("transform", d => `translate(${d.x},${d.y})`);
                });

                function drag(simulation) {
                    function dragstarted(event) {
                        if (!event.active) simulation.alphaTarget(0.3).restart();
                        event.subject.fx = event.subject.x;
                        event.subject.fy = event.subject.y;
                    }
                    function dragged(event) {
                        event.subject.fx = event.x;
                        event.subject.fy = event.y;
                    }
                    function dragended(event) {
                        if (!event.active) simulation.alphaTarget(0);
                    }
                    return d3.drag()
                        .on("start", dragstarted)
                        .on("drag", dragged)
                        .on("end", dragended);
                }

                return () => simulation.stop();

            }, []); 

            return (
                <svg ref={svgRef} style={{ overflow: 'hidden' }}></svg>
            );
        };
        // --- КОНЕЦ КОМПОНЕНТА ГРАФА ---


// Компонент Slideshow (для первого слайд-шоу)
        // ИСПРАВЛЕНИЕ: Добавлены onShowModules и onShowTariffs для навигации
        const Slideshow = ({ slides, initialAnimationClass, onShowModules, onShowTariffs }) => { 
            const [current, setCurrent] = useState(0);
            const [timerResetKey, setTimerResetKey] = useState(0);
            const totalSlides = slides.length;

            // Состояние для модального окна
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [selectedSlide, setSelectedSlide] = useState(null);

            // Функции управления модальным окном
            const openModal = (slide) => {
                setSelectedSlide(slide);
                setIsModalOpen(true);
            };
            const closeModal = () => {
                setIsModalOpen(false);
                setSelectedSlide(null);
            };

            useEffect(() => {
                const timer = setInterval(() => {
                    setCurrent(prev => (prev + 1) % totalSlides);
                }, 8000); 
                return () => clearInterval(timer);
            }, [totalSlides, timerResetKey]);

            const goToSlide = (index) => {
                setCurrent(index);
                setTimerResetKey(prev => prev + 1);
            };
            const nextSlide = () => {
                setCurrent(prev => (prev === totalSlides - 1 ? 0 : prev + 1));
                setTimerResetKey(prev => prev + 1);
            };
            const prevSlide = () => {
                setCurrent(prev => (prev === 0 ? totalSlides - 1 : prev - 1));
                setTimerResetKey(prev => prev + 1);
            };
            
            // <<< НОВАЯ ФУНКЦИЯ ДЛЯ ОБРАБОТКИ КЛИКА >>>
            const handleSlideLinkClick = (slide) => {
                if (slide.openModal) {
                    openModal(slide); // Открываем модальное окно (для Акции)
                    return;
                } 
                
                if (slide.linkTo === "#модули" && onShowModules) {
                    onShowModules(); // <-- РЕШЕНИЕ: Вызываем функцию перехода
                    return;
                }
                
                if (slide.linkTo === "#тарифы" && onShowTariffs) {
                    onShowTariffs(); // Для перехода на Тарифы (если понадобится)
                    return;
                }

                if (slide.linkTo) {
                    // Переход по якорю на главной странице (например, #о-нас)
                    window.location.hash = slide.linkTo; 
                }
            };

            return (
                <>
                    <div className={`slideshow-wrapper ${initialAnimationClass}`}> 
                        <div
                            className="slideshow-track"
                            style={{ transform: `translateX(-${current * 100}%)` }}
                        >
                            {slides.map(slide => (
                                <div className="slideshow-block" key={slide.id}>
                                    <h3 className="slideshow-title" dangerouslySetInnerHTML={{ __html: slide.title }}></h3>
                                    <p className="slideshow-text" dangerouslySetInnerHTML={{ __html: slide.text }}></p>
                                    
                                    {/* Логика кнопки "Подробнее" (для модального окна или ссылки) */}
                                    { (slide.linkTo || slide.openModal) && (
                                        <div className="slideshow-footer">
                                            <span 
                                                className="slideshow-button"
                                                style={{ cursor: 'pointer' }}
                                                onClick={() => handleSlideLinkClick(slide)} // Используем новую функцию
                                            >
                                                Подробнее
                                            </span>
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                        
                        <div className="slideshow-dots">
                            <div className="slideshow-nav-arrow arrow-left" onClick={prevSlide}>
                                arrow_back_ios
                            </div>
                            {slides.map((_, index) => (
                                <span
                                    key={index}
                                    className={`dot ${index === current ? 'active' : ''}`}
                                    onClick={() => goToSlide(index)}
                                ></span>
                            ))}
                            <div className="slideshow-nav-arrow arrow-right" onClick={nextSlide}>
                                arrow_forward_ios
                            </div>
                        </div>
                    </div>

                    <ProductModal 
                        isOpen={isModalOpen} 
                        onClose={closeModal} 
                        product={selectedSlide} 
                    />
                </>
            );
        };
        
        // Компонент Модальное окно (для продуктов и модулей) (без изменений)
            const ProductModal = ({ isOpen, onClose, product, onAddToCart }) => {
                if (!product) return null;

                const handleAddToCartClick = () => {
                    // Проверяем, существует ли функция, прежде чем вызывать ее
                    if (onAddToCart) {
                        onAddToCart(product);
                    }
                    onClose(); 
                };

                return (
                    <div className={`modal-overlay ${isOpen ? 'open' : ''}`} onClick={onClose}>
                        <div className="modal-content" onClick={e => e.stopPropagation()}>
                            <button className="modal-close-button" onClick={onClose}>&times;</button>
                            <h3 className="modal-title">{product.title}</h3>
                            <div 
                                className="modal-description" 
                                dangerouslySetInnerHTML={{ __html: product.details || product.text }}
                            ></div>

                            {/* --- БЛОК ЛОГИКИ ОТОБРАЖЕНИЯ ЦЕНЫ И КНОПКИ --- */}
                            
                            {/* 1. Показываем цену, только если она есть И передана функция onAddToCart */}
                            {product.price && onAddToCart && (
                                <div className="modal-price">
                                    {product.price.toLocaleString('ru-RU')} ₽
                                </div>
                            )}
                            
                            {/* 2. Показываем кнопку, только если она есть И передана функция onAddToCart */}
                            {product.price && onAddToCart && (
                                <button className="button-primary" onClick={handleAddToCartClick}>
                                    Добавить в корзину
                                </button>
                            )}
                        
                        </div>
                    </div>
                );
            };

            // КОМПОНЕНТ ДЛЯ ЧЕКА
            // ИСПРАВЛЕНИЕ: Отображает количество (xN) и считает общее кол-во
            const ReceiptModal = ({ isOpen, onClose, items, total }) => {
                if (!isOpen) return null;

                // Считаем общее количество штук (не позиций)
                const totalQuantity = items.reduce((sum, item) => sum + item.quantity, 0);

                return (
                    <div className="modal-overlay open" onClick={onClose}>
                        <div className="modal-content" onClick={e => e.stopPropagation()}>
                            <button className="modal-close-button" onClick={onClose}>&times;</button>
                            <h3 className="modal-title">Заказ оформлен!</h3>
                            <p className="modal-description" style={{marginBottom: '15px'}}>Ваш чек:</p>
                            
                            <div className="receipt-items-list">
                                {/* items теперь { product, quantity } */}
                                {items.map(item => (
                                    <div className="receipt-item" key={item.product.id}>
                                        <span className="receipt-item-title">
                                            {item.product.title} (x{item.quantity})
                                        </span>
                                        <span className="receipt-item-price">
                                            {/* Считаем цену за позицию */}
                                            {(item.product.price * item.quantity).toLocaleString('ru-RU')} ₽
                                        </span>
                                    </div>
                                ))}
                            </div>
                            
                            <div className="receipt-total">
                                <span className="receipt-total-label">Итого ({totalQuantity} шт.):</span>
                                <span className="receipt-total-amount">{total.toLocaleString('ru-RU')} ₽</span>
                            </div>

                            <button className="button-primary receipt-modal-button" onClick={onClose} style={{marginTop: '30px', float: 'right'}}>
                                Закрыть
                            </button>
                        </div>
                    </div>
                );
            };
        
        // <<< НОВЫЙ КОМПОНЕНТ: МОДАЛЬНОЕ ОКНО УСПЕХА ФОРМЫ >>>
        const SuccessModal = ({ isOpen, onClose, message }) => {
            if (!isOpen) return null;
            return (
                <div className="modal-overlay open" onClick={onClose}>
                    <div className="modal-content" onClick={e => e.stopPropagation()}>
                        <button className="modal-close-button" onClick={onClose}>&times;</button>
                        <h3 className="modal-title">Сообщение отправлено!</h3>
                        <p className="modal-description">{message}</p>
                        <button className="button-primary" onClick={onClose} style={{marginTop: '20px', float: 'right'}}>
                            Закрыть
                        </button>
                    </div>
                </div>
            );
        };


        // <<< НОВЫЙ КОМПОНЕНТ: PRODUCT SLIDESHOW - Исправлена кнопка "Больше возможностей" >>>
        // ИЗМЕНЕНИЕ: Добавлен onShowTariffs в параметры
        const ProductSlideshow = ({ slides, initialAnimationClass, onAddToCart, onShowModules, onShowTariffs }) => {
            const [current, setCurrent] = useState(0);
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [isModalOpen, setIsModalOpen] = useState(false); 
            const totalSlides = slides.length;

            const goToSlide = (index) => setCurrent(index);
            const nextSlide = () => setCurrent(prev => (prev === totalSlides - 1 ? 0 : prev + 1));
            const prevSlide = () => setCurrent(prev => (prev === 0 ? totalSlides - 1 : prev - 1));

            const openModal = (product) => {
                if (product.linkTo === "#каталог-модулей") {
                    // ИЗМЕНЕНИЕ: Теперь вызывает onShowTariffs
                    onShowTariffs(); 
                    return;
                }
                if (product.linkTo && product.linkTo !== "#каталог-модулей") {
                    window.location.hash = product.linkTo;
                    return;
                }
                setSelectedProduct(product);
                setIsModalOpen(true);
            };

            const closeModal = () => {
                setIsModalOpen(false);
                setSelectedProduct(null);
            };

            return (
                <>
                    <div className={`product-slideshow-wrapper ${initialAnimationClass}`}>
                        <div className="slideshow-track" style={{ transform: `translateX(-${current * 100}%)` }} >
                            {slides.map(slide => (
                                <div className="slideshow-block" key={slide.id}>
                                    <h3 className="slideshow-title" dangerouslySetInnerHTML={{ __html: slide.title }}></h3>
                                    <p className="slideshow-text" dangerouslySetInnerHTML={{ __html: slide.text }}></p>
                                    {slide.linkTo ? (
                                        <span onClick={() => openModal(slide)} className="slideshow-button centered-slideshow-button" style={{cursor: "pointer"}}>
                                            Подробнее
                                        </span>
                                    ) : (
                                        <div className="plus-button" onClick={() => openModal(slide)} title="Подробнее о продукте">
                                            <span className="material-symbols-rounded">add</span>
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                        
                        <div className="slideshow-dots">
                            <div className="slideshow-nav-arrow arrow-left" onClick={prevSlide}>
                                <span className="material-symbols-rounded">arrow_back_ios</span>
                            </div>
                            {slides.map((_, index) => (
                                <span key={index} className={`dot ${index === current ? 'active' : ''}`} onClick={() => goToSlide(index)} ></span>
                            ))}
                            <div className="slideshow-nav-arrow arrow-right" onClick={nextSlide}>
                                <span className="material-symbols-rounded">arrow_forward_ios</span>
                            </div>
                        </div>
                    </div>

                    <ProductModal 
                        isOpen={isModalOpen} 
                        onClose={closeModal} 
                        product={selectedProduct} 
                    />
                </>
            );
        };
        
        // <<< КОНЕЦ КОМПОНЕНТА PRODUCT SLIDESHOW >>>
        // Компонент PartnersMarquee (без изменений)
        const PartnersMarquee = ({ logos }) => {
            const duplicatedLogos = [...logos, ...logos];
            return (
                <div className="partners-marquee"> 
                    <div className="partner-logo-track">
                        {duplicatedLogos.map((logo, index) => (
                            <div className="partner-logo-item" key={index} title={logo.name}> 
                                {logo.image ? (
                                    <img src={logo.image} alt={logo.name} />
                                ) : (
                                    <span className="material-symbols-rounded" style={{fontSize: '65px', color: '#5c5c5e'}}>
                                        {logo.icon}
                                    </span>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };
        
        // <<< НОВЫЙ КОМПОНЕНТ: ФОРМА ОБРАТНОЙ СВЯЗИ (С КОНТАКТАМИ И ВЫРОВНЕННОЙ КАРТОЙ) >>>
        const ContactForm = () => {
            const [firstName, setFirstName] = useState('');
            const [lastName, setLastName] = useState('');
            const [email, setEmail] = useState('');
            const [phone, setPhone] = useState('');
            const [message, setMessage] = useState('');
            const [isModalOpen, setIsModalOpen] = useState(false);

            const handleSubmit = (e) => {
                e.preventDefault();
                // (Здесь могла бы быть логика отправки)
                console.log("Форма отправлена:", { firstName, lastName, email, phone, message });
                setIsModalOpen(true);
            };

            const handleCloseModal = () => {
                setIsModalOpen(false);
                // Очистка формы
                setFirstName('');
                setLastName('');
                setEmail('');
                setPhone('');
                setMessage('');
            };

            return (
                <>
                    <AnimateOnScroll>
                        <div className="contact-section-container" id="контакты">
                            <h3>Остались вопросы?</h3>
                            <form className="contact-form" onSubmit={handleSubmit}>
                                <div className="form-row">
                                    <div className="form-group">
                                        <label htmlFor="firstName">Имя</label>
                                        <input type="text" id="firstName" className="form-input" value={firstName} onChange={e => setFirstName(e.target.value)} required />
                                    </div>
                                    <div className="form-group">
                                        <label htmlFor="lastName">Фамилия</label>
                                        <input type="text" id="lastName" className="form-input" value={lastName} onChange={e => setLastName(e.target.value)} required />
                                    </div>
                                </div>
                                <div className="form-row">
                                    <div className="form-group">
                                        <label htmlFor="email">Почта</label>
                                        <input type="email" id="email" className="form-input" value={email} onChange={e => setEmail(e.target.value)} required />
                                    </div>
                                    <div className="form-group">
                                        <label htmlFor="phone">Номер телефона</label>
                                        <input type="tel" id="phone" className="form-input" value={phone} onChange={e => setPhone(e.target.value)} />
                                    </div>
                                </div>
                                <div className="form-group">
                                    <label htmlFor="message">Сообщение</label>
                                    <textarea id="message" className="form-textarea" value={message} onChange={e => setMessage(e.target.value)} required></textarea>
                                </div>
                                <button type="submit" className="form-submit-button">Отправить</button>
                            </form>

                            {/* === БЛОК КОНТАКТОВ С ВЫРОВНЕННОЙ КАРТОЙ === */}
                            <div className="contact-details-block">
                                
                                {/* Колонка с текстовыми контактами (теперь содержит заголовок) */}
                                <div className="contact-info-column"> 
                                    <h4 className="contact-details-title">Наши контакты</h4> {/* Заголовок перемещен сюда */}
                                    <div className="contact-details-item">
                                        <span className="material-symbols-rounded">location_on</span>
                                        <span>1-й Красногвардейский проезд, 22с1, Москва, 123112</span>
                                    </div>
                                    <div className="contact-details-item">
                                        <span className="material-symbols-rounded">call</span>
                                        <a href="tel:+74951234567">+7 (495) 123-45-67</a>
                                    </div>
                                    <div className="contact-details-item">
                                        <span className="material-symbols-rounded">mail</span>
                                        <a href="mailto:info@primefort.ru">info@primefort.ru</a>
                                    </div>
                                    <div className="contact-details-item">
                                        <span className="material-symbols-rounded">schedule</span>
                                        <span>Пн-Пт 10:00-19:00</span>
                                    </div>
                                </div>
                                
                                {/* Колонка с картой Yandex Maps */}
                                <div className="map-column">
                                    {/* Ваш код от Яндекс Карт, адаптированный для React/JSX */}
                                    <div style={{position: 'relative', overflow: 'hidden', height: '100%', width: '100%'}}>
                                        <a href="https://yandex.ru/maps/213/moscow/?utm_medium=mapframe&utm_source=maps" style={{color:'#eee', fontSize:'12px', position:'absolute', top:'0px', zIndex: 10}}>Москва</a>
                                        <a href="https://yandex.ru/maps/213/moscow/house/1_y_krasnogvardeyskiy_proyezd_22s1/Z04YcwRjTkcDQFtvfXt0cH1gZw==/?ll=37.545131%2C55.751133&utm_medium=mapframe&utm_source=maps&z=14.66" style={{color:'#eee', fontSize:'12px', position:'absolute', top:'14px', zIndex: 10}}>Яндекс Карты</a>
                                        <iframe 
                                            src="https://yandex.ru/map-widget/v1/?ll=37.545131%2C55.751133&mode=search&ol=geo&uri=ymapsbm1%3A%2F%2Fgeo%3Fdata%3DIgoNiCIWQhUpAV9C&z=14.66" 
                                            frameBorder="1" 
                                            allowFullScreen={true} 
                                            style={{position:'relative'}}
                                        ></iframe>
                                    </div>
                                </div>
                                
                            </div>
                            {/* === КОНЕЦ БЛОКА КОНТАКТОВ С КАРТОЙ === */}

                        </div>
                    </AnimateOnScroll>
                    <SuccessModal 
                        isOpen={isModalOpen} 
                        onClose={handleCloseModal} 
                        message="Мы ответим вам в течение 3 дней. Спасибо, что написали!"
                    />
                </>
            );
        };

        // === КОМПОНЕНТ: КАРТОЧКА МОДУЛЯ (для каталога) (без изменений) ===
        const ModuleCard = ({ module, onOpenModal }) => {
            
            // Эта функция теперь просто открывает модальное окно
            const handleButtonClick = (e) => {
                e.stopPropagation(); // Остановка всплытия, чтобы не вызывать onOpenModal дважды
                onOpenModal(module);
            };
            
            return (
                <AnimateOnScroll>
                    {/* Вся карточка по-прежнему открывает модальное окно */}
                    <div className="module-card" onClick={() => onOpenModal(module)}>
                        <h4>{module.title}</h4>
                        <p className="brief-desc">{module.brief}</p>
                        <div className="card-footer" style={{ justifyContent: 'flex-end' }}>
                            {/* Цена убрана */}
                            
                            {/* Кнопка "Подробнее" */}
                            <button className="button-primary" onClick={handleButtonClick}>
                                Подробнее
                            </button>
                        </div>
                    </div>
                </AnimateOnScroll>
            );
        };

        // === КОМПОНЕНТ: СЕКЦИЯ МОДУЛЕЙ (Каталог) (без изменений) ===
        const ModulesCatalog = ({ modules }) => {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [selectedModule, setSelectedModule] = useState(null);

            const openModal = (module) => {
                setSelectedModule(module);
                setIsModalOpen(true);
            };
            const closeModal = () => {
                setIsModalOpen(false);
                setSelectedModule(null);
            };
            
            return (
                <>
                    <AnimateOnScroll>
                        <div className="module-section-title-container" id="каталог-модулей">
                            <h3 className="module-section-title">Полный каталог модулей Prime Fort</h3>
                        </div>
                    </AnimateOnScroll>

                    <div className="module-grid">
                        {modules.map(module => (
                            <ModuleCard
                                key={module.id}
                                module={module}
                                onOpenModal={openModal}
                                // onAddToCart убран
                            />
                        ))}
                    </div>
                    
                    <ProductModal 
                        isOpen={isModalOpen} 
                        onClose={closeModal} 
                        product={selectedModule} 
                        // onAddToCart убран (теперь модальное окно будет информационным)
                    />
                </>
            );
        };


            // Компонент CartPage
            // ИСПРАВЛЕНИЕ: Добавлены onIncrement/onDecrement и счетчик
            const CartPage = ({ items, onRemoveFromCart, onShowHome, onClearCart, onIncrement, onDecrement }) => {
                
                const [showReceipt, setShowReceipt] = useState(false);
                
                // ИСПРАВЛЕНИЕ: Логика подсчета тотала
                // items теперь { product, quantity }
                const total = items.reduce((sum, item) => sum + (item.product.price * item.quantity), 0);

                const handleCheckout = () => {
                    if (total === 0) {
                        alert("Ваша корзина пуста."); 
                        return;
                    }
                    setShowReceipt(true);
                };

                const handleCloseReceipt = () => {
                    setShowReceipt(false);
                    onClearCart(); 
                };

                return (
                    <div className="page-container">
                        <div className="container cart-page-container">
                            
                            <h2>Ваша корзина</h2>

                            {items.length === 0 ? (
                                <p className="empty-cart-text">В корзине пока нет ни одного модуля.</p>
                            ) : (
                                <>
                                    <div className="cart-items-list">
                                        {/* items теперь { product, quantity } */}
                                        {items.map(item => (
                                            <div key={item.product.id} className="cart-item">
                                                <div className="cart-item-info">
                                                    <h4>{item.product.title}</h4>
                                                    <p>{item.product.price.toLocaleString('ru-RU')} ₽ / шт.</p>
                                                </div>
                                                
                                                {/* <<< НОВЫЙ БЛОК: СЧЕТЧИК КОЛИЧЕСТВА >>> */}
                                                <div className="cart-quantity-controls">
                                                    <button onClick={() => onDecrement(item.product.id)}>-</button>
                                                    <span>{item.quantity}</span>
                                                    <button onClick={() => onIncrement(item.product)}>+</button>
                                                </div>

                                                <button 
                                                    className="button-primary button-secondary" 
                                                    onClick={() => onRemoveFromCart(item.product.id)}
                                                >
                                                    Удалить
                                                </button>
                                            </div>
                                        ))}
                                    </div>

                                    <div className="cart-total-block">
                                        <h3>Итого: {total.toLocaleString('ru-RU')} ₽</h3>
                                        <button className="button-primary" onClick={handleCheckout}>
                                            Оформить заказ
                                        </button>
                                    </div>
                                </>
                            )}
                        </div>
                        
                        <ReceiptModal
                            isOpen={showReceipt}
                            onClose={handleCloseReceipt}
                            items={items}
                            total={total}
                        />
                    </div>
                );
            };

        // Компонент-страница для Модулей
        const ModulesPage = ({ modules, onShowHome }) => {
            return (
                <div className="page-container">
                    <div className="container cart-page-container">
                        
                        
                        <ModulesCatalog modules={modules} />
                    </div>
                </div>
            );
        };

        // === ИСПРАВЛЕННЫЙ КОМПОНЕНТ: КАРТОЧКА ТАРИФА (TariffCard) ===
        // ИСПРАВЛЕНИЕ: Отображает tariff.paymentType
        const TariffCard = ({ tariff, onAddToCart }) => {
            const handleButtonClick = (e) => {
                e.stopPropagation();
                onAddToCart(tariff);
            };

            return (
                <AnimateOnScroll>
                    <div className="tariff-card">
                        <div>
                            <h4>{tariff.title}</h4>
                            {/* ИСПРАВЛЕНИЕ: Разделяем цену и тип оплаты */}
                            <div className="tariff-price"> 
                                {tariff.price.toLocaleString('ru-RU')} ₽
                                <span className="tariff-payment-type-display">
                                    {tariff.paymentType} 
                                </span>
                            </div>
                            
                            <div className="tariff-details">
                                <p><strong>Суть:</strong> {tariff.idea}</p>
                                <p><strong>Включает:</strong> {tariff.modules}</p>
                                <p><strong>Преимущества:</strong> {tariff.advantages}</p>
                            </div>
                            
                        </div>
                        <div className="card-footer">
                            <button className="button-primary" onClick={handleButtonClick}>
                                Добавить в корзину
                            </button>
                        </div>
                    </div>
                </AnimateOnScroll>
            );
        };

        // <<< НОВЫЙ/ИЗМЕНЕННЫЙ КОМПОНЕНТ: СТРАНИЦА ТАРИФОВ С ФИЛЬТРОМ >>>
        const TariffsPage = ({ tariffs, onAddToCart, onShowHome }) => {
            const [activeCategory, setActiveCategory] = useState('all');

            // Определяем наши категории
            const categories = {
                'all': 'Все',
                'base_security': 'База и Безопасность',
                'finance_legal': 'Финансы и Право',
                'industry': 'Промышленность и IoT',
                'ai_analytics': 'AI и Аналитика',
                'enterprise': 'Enterprise'
            };

            // Фильтруем тарифы на основе активной категории
            const filteredTariffs = tariffs.filter(tariff => {
                if (activeCategory === 'all') return true;
                return tariff.category === activeCategory;
            });

            return (
                <div className="page-container">
                    <div className="container cart-page-container">
                        
                        
                        <AnimateOnScroll>
                            <div className="module-section-title-container" id="тарифы-каталог">
                                <h3 className="module-section-title">Тарифы и Пакеты</h3>
                            </div>
                        </AnimateOnScroll>

                        {/* Рендерим кнопки фильтра */}
                        <div className="tariff-filter-container">
                            {Object.entries(categories).map(([key, name]) => (
                                <button 
                                    key={key} 
                                    className={`tariff-filter-button ${activeCategory === key ? 'active' : ''}`}
                                    onClick={() => setActiveCategory(key)}
                                >
                                    {name}
                                </button>
                            ))}
                        </div>

                        <div className="tariff-grid">
                            {filteredTariffs.map(tariff => (
                                <TariffCard
                                    key={tariff.id}
                                    tariff={tariff}
                                    onAddToCart={onAddToCart}
                                />
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // КОМПОНЕНТЫ ДЛЯ УВЕДОМЛЕНИЙ (без изменений)
        const ToastNotification = ({ message, onRemove }) => {
            useEffect(() => {
                const timer = setTimeout(onRemove, 3000); 
                return () => clearTimeout(timer);
            }, [onRemove]);

            return (
                <div className="toast-notification">
                    <span>{message}</span>
                    <button className="toast-close" onClick={onRemove}>&times;</button>
                </div>
            );
        };

        const ToastContainer = ({ notifications, onRemove }) => {
            return (
                <div className="toast-container">
                    {notifications.map(toast => (
                        <ToastNotification 
                            key={toast.id} 
                            message={toast.message} 
                            onRemove={() => onRemove(toast.id)} 
                        />
                    ))}
                </div>
            );
        };
        
        // <<< ОБНОВЛЕННЫЙ КОМПОНЕНТ FOOTER - ЗАГЛУШКИ УБРАНЫ >>> 
        const Footer = ({ onShowModules, onShowTariffs, onNavigateToHomeAnchor, onShowCart }) => {
            
            const contactInfo = {
                address: '1-й Красногвардейский проезд, 22с1, Москва, 123112',
                email: 'info@primefort.com',
                phone: '+7 (495) 123-45-67'
            };

            // Хелпер для навигации по якорям на главную
            const handleAnchorClick = (e, anchorId) => {
                e.preventDefault();
                onNavigateToHomeAnchor(anchorId);
            };

            // Функция-заглушка handleExternalLink удалена

            return (
                <footer className="footer-new">
                    <div className="container footer-content-new">
                        
                        {/* 1. О КОМПАНИИ */}
                        <div className="footer-column">
                            <h4>О Компании</h4>
                            <ul>
                                <li><a href="#о-нас" onClick={(e) => handleAnchorClick(e, 'о-нас')}>О нас</a></li>
                                <li><a href="#о-нас" onClick={(e) => handleAnchorClick(e, 'о-нас')}>Миссия</a></li>
                                <li><a href="#партнерство" onClick={(e) => handleAnchorClick(e, 'партнерство')}>Партнерство</a></li>
                                {/* ИСПРАВЛЕНО: Заглушка <a> заменена на <span> */}
                                <li><a href="#" onClick={onShowTariffs}>Акции</a></li>
                                <li><span className="stub-link">Карьера</span></li>
                                <li><a href="#контакты" onClick={(e) => handleAnchorClick(e, 'контакты')}>Контакты</a></li>
                            </ul>
                        </div>
                        
                        {/* 2. ПРОДУКТЫ */}
                        <div className="footer-column">
                            <h4>Продукты</h4>
                            <ul>
                                <li><a href="#" onClick={onShowModules}>Модули</a></li>
                                <li><a href="#" onClick={onShowTariffs}>Тарифы</a></li>
                                <li><a href="#" onClick={onShowCart}>Корзина</a></li> 
                            </ul>
                        </div>

                        {/* 3. СВЯЗЬ */}
                        <div className="footer-column">
                            <h4>Связь</h4>
                            <ul>
                                <li>
                                    <div className="social-icons">
                                        <a href="https://vk.com" target="_blank" rel="noopener noreferrer" className="vk-icon">
                                            <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M15.07294,2H8.9375C3.33331,2,2,3.33331,2,8.92706V15.0625C2,20.66663,3.32294,22,8.92706,22H15.0625C20.66669,22,22,20.67706,22,15.07288V8.9375C22,3.33331,20.67706,2,15.07294,2Zm3.07287,14.27081H16.6875c-.55206,0-.71875-.44793-1.70831-1.4375-.86463-.83331-1.22919-.9375-1.44794-.9375-.30206,0-.38544.08332-.38544.5v1.3125c0,.35419-.11456.5625-1.04162.5625a5.69214,5.69214,0,0,1-4.44794-2.66668A11.62611,11.62611,0,0,1,5.35419,8.77081c0-.21875.08331-.41668.5-.41668H7.3125c.375,0,.51044.16668.65625.55212.70831,2.08331,1.91669,3.89581,2.40625,3.89581.1875,0,.27081-.08331.27081-.55206V10.10413c-.0625-.97913-.58331-1.0625-.58331-1.41663a.36008.36008,0,0,1,.375-.33337h2.29169c.3125,0,.41662.15625.41662.53125v2.89587c0,.3125.13544.41663.22919.41663.1875,0,.33331-.10413.67706-.44788a11.99877,11.99877,0,0,0,1.79169-2.97919.62818.62818,0,0,1,.63544-.41668H17.9375c.4375,0,.53125.21875.4375.53125A18.20507,18.20507,0,0,1,16.41669,12.25c-.15625.23956-.21875.36456,0,.64581.14581.21875.65625.64582,1,1.05207a6.48553,6.48553,0,0,1,1.22912,1.70837C18.77081,16.0625,18.5625,16.27081,18.14581,16.27081Z"/>
                                            </svg>
                                        </a>
                                        <a href="https://t.me" target="_blank" rel="noopener noreferrer">
                                            <svg width="24" height="24" viewBox="0 0 16 16" fill="currentColor">
                                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"/>
                                            </svg>
                                        </a>
                                    </div>
                                </li>
                                {/* ИСПРАВЛЕНО: Заглушка <a> заменена на <span> */}
                                <li><span className="stub-link">Разработчикам</span></li>
                                <li><span className="stub-link">Поддержка 24/7</span></li>
                            </ul>
                        </div>

                        {/* 4. КОНТАКТНЫЕ ДАННЫЕ */}
                        <div className="footer-column contact-info">
                            <h4>Контактная информация</h4>
                            <p><strong>Адрес:</strong> {contactInfo.address}</p>
                            <p><strong>Email:</strong> <a href={`mailto:${contactInfo.email}`}>{contactInfo.email}</a></p>
                            <p><strong>Телефон:</strong> <a href={`tel:${contactInfo.phone.replace(/\s/g, '')}`}>{contactInfo.phone}</a></p>
                        </div>
                        
                    </div>
                    
                    {/* НИЖНИЙ РЯД: КОПИРАЙТ И ЛЕГАЛЬНЫЕ ССЫЛКИ */}
                    <div className="footer-bottom-row container">
                        <p className="copyright">© 2025 Prime Fort. Все права защищены.</p>
                        <div className="legal-links">
                            {/* ИСПРАВЛЕНО: Заглушка <a> заменена на <span> */}
                            <span className="stub-link-legal">Политика конфиденциальности</span>
                            <span>|</span>
                            <span className="stub-link-legal">Условия использования</span>
                        </div>
                    </div>
                </footer>
            );
        };

        // === ГЛАВНЫЙ КОМПОНЕНТ APP ===
// === ГЛАВНЫЙ КОМПОНЕНТ APP ===
        const App = () => {
            const [isLoaded, setIsLoaded] = useState(false); 
            // <<< ИЗМЕНЕНИЕ: Добавлено состояние 'tariffs' >>>
            const [currentView, setCurrentView] = useState('home'); 
            const [cartItems, setCartItems] = useState([]);
            const [notifications, setNotifications] = useState([]);
            
            useEffect(() => {
                const timeout = setTimeout(() => {
                    setIsLoaded(true);
                }, 50); 
                return () => clearTimeout(timeout);
            }, []);

            // <<< НОВЫЙ КОД ДЛЯ ФОНА >>>
            // Этот useEffect управляет классом фона на <body>
            useEffect(() => {
                const body = document.body;
                
                // 1. Сначала удаляем все классы, связанные с видом
                body.classList.remove('view-home', 'view-cart', 'view-modules', 'view-tariffs');

                // 2. Добавляем нужный класс в зависимости от currentView
                switch (currentView) {
                    case 'cart':
                        body.classList.add('view-cart');
                        break;
                    case 'modules':
                        body.classList.add('view-modules');
                        break;
                    case 'tariffs':
                        body.classList.add('view-tariffs');
                        break;
                    case 'home':
                    default:
                        body.classList.add('view-home');
                        break;
                }
                
            }, [currentView]); // <-- Этот hook будет запускаться каждый раз при изменении currentView
            // <<< КОНЕЦ НОВОГО КОДА >>>


            // --- Функции для управления уведомлениями ---
            const addNotification = (message) => {
                const id = Date.now();
                setNotifications(prev => [...prev, { id, message }]);
            };

            const removeNotification = (id) => {
                setNotifications(prev => prev.filter(n => n.id !== id));
            };

            // --- Функции для управления корзиной ---
            // ИСПРАВЛЕНИЕ: handleAddToCart теперь ищет товар и увеличивает quantity
            const handleAddToCart = (productToAdd) => {
                setCartItems(prevItems => {
                    const existingItem = prevItems.find(item => item.product.id === productToAdd.id);
                    
                    if (existingItem) {
                        // Товар есть, увеличиваем quantity
                        addNotification(`Еще один "${productToAdd.title}" добавлен!`);
                        return prevItems.map(item =>
                            item.product.id === productToAdd.id
                                ? { ...item, quantity: item.quantity + 1 }
                                : item
                        );
                    } else {
                        // Новый товар, добавляем с quantity: 1
                        addNotification(`${productToAdd.title} добавлен в корзину!`);
                        return [...prevItems, { product: productToAdd, quantity: 1 }];
                    }
                });
            };

            // ИСПРАВЛЕНИЕ: handleRemoveFromCart теперь фильтрует по product.id
            const handleRemoveFromCart = (productId) => {
                setCartItems(prevItems => prevItems.filter(item => item.product.id !== productId));
            };

            // <<< НОВАЯ ФУНКЦИЯ: Уменьшение количества (для кнопки "-") >>>
            const decrementCartItem = (productId) => {
                setCartItems(prevItems => {
                    const existingItem = prevItems.find(item => item.product.id === productId);

                    // Если товар один, удаляем его (filter)
                    if (existingItem && existingItem.quantity === 1) {
                        return prevItems.filter(item => item.product.id !== productId);
                    }

                    // Если > 1, уменьшаем quantity (map)
                    return prevItems.map(item =>
                        item.product.id === productId
                            ? { ...item, quantity: item.quantity - 1 }
                            : item
                    );
                });
            };

            const handleClearCart = () => {
                setCartItems([]);
            };


            // --- Функции для навигации ---
            const showCart = () => {
                setCurrentView('cart');
                window.scrollTo(0, 0); 
            };
            
            const showHome = () => {
                setCurrentView('home');
                window.scrollTo(0, 0); 
            };
            
            const showModules = () => {
                setCurrentView('modules');
                window.scrollTo(0, 0); 
            };
            
            // <<< ИЗМЕНЕНИЕ: Новая функция для страницы тарифов >>>
            const showTariffs = () => {
                setCurrentView('tariffs');
                window.scrollTo(0, 0);
            };
            
            const navigateToHomeAnchor = (anchorId) => {
                setCurrentView('home');
                
                setTimeout(() => {
                    const element = document.getElementById(anchorId);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth' });
                    } else {
                        window.scrollTo(0, 0);
                    }
                }, 0); 
            };
            

            const animationClass = isLoaded ? 'animate-in' : '';

            // --- УСЛОВНЫЙ РЕНДЕРИНГ: КОРЗИНА, МОДУЛИ, ТАРИФЫ ИЛИ ГЛАВНАЯ СТРАНИЦА ---
            
            // <<< ИЗМЕНЕНИЕ: Обернул все в <div className="app-container"> и добавил Footer >>>
            
            // 1. Рендеринг Корзины
            if (currentView === 'cart') {
                return (
                    <div className="app-container">
                        <Header 
                            onShowCart={showCart} 
                            cartCount={cartItems.length} 
                            onShowModules={showModules}
                            onShowTariffs={showTariffs}
                            onNavigateToHomeAnchor={navigateToHomeAnchor}
                            currentView={currentView}
                            onShowHome={showHome}
                        />
                        <ScrollFadeOverlay />
                        <CartPage 
                            items={cartItems} 
                            onShowHome={showHome}
                            onRemoveFromCart={handleRemoveFromCart} 
                            onClearCart={handleClearCart} 
                            onIncrement={handleAddToCart}  
                            onDecrement={decrementCartItem} 
                        />
                        <Footer 
                            onShowModules={showModules}
                            onShowTariffs={showTariffs}
                            onNavigateToHomeAnchor={navigateToHomeAnchor}
                            onShowCart={showCart}
                        />
                        <ToastContainer notifications={notifications} onRemove={removeNotification} />
                    </div>
                );
            }
            
                // 2. Рендеринг новой страницы Модулей
                if (currentView === 'modules') {
                    return (
                        <div className="app-container">
                            <Header 
                                onShowCart={showCart} 
                                cartCount={cartItems.length} 
                                onShowModules={showModules}
                                onShowTariffs={showTariffs}
                                onNavigateToHomeAnchor={navigateToHomeAnchor}
                                currentView={currentView}
                                onShowHome={showHome}
                            />
                            <ScrollFadeOverlay />
                            <ModulesPage
                                modules={modulesData}
                                // onAddToCart={handleAddToCart} // <-- ИСПРАВЛЕНИЕ: Эта строка удалена
                                onShowHome={showHome}
                            />
                            <Footer 
                                onShowModules={showModules}
                                onShowTariffs={showTariffs}
                                onNavigateToHomeAnchor={navigateToHomeAnchor}
                                onShowCart={showCart}
                            />
                            <ToastContainer notifications={notifications} onRemove={removeNotification} />
                        </div>
                    );
                }

            // 3. Рендеринг новой страницы Тарифов
            if (currentView === 'tariffs') {
                return (
                    <div className="app-container">
                        <Header 
                            onShowCart={showCart} 
                            cartCount={cartItems.length} 
                            onShowModules={showModules}
                            onShowTariffs={showTariffs}
                            onNavigateToHomeAnchor={navigateToHomeAnchor}
                            currentView={currentView}
                            onShowHome={showHome}
                        />
                        <ScrollFadeOverlay />
                        <TariffsPage
                            tariffs={tariffsData}
                            onAddToCart={handleAddToCart}
                            onShowHome={showHome}
                        />
                        <Footer 
                            onShowModules={showModules}
                            onShowTariffs={showTariffs}
                            onNavigateToHomeAnchor={navigateToHomeAnchor}
                            onShowCart={showCart}
                        />
                        <ToastContainer notifications={notifications} onRemove={removeNotification} />
                    </div>
                );
            }

            // 4. Рендеринг всей Главной страницы (один длинный скролл)
            return (
                <div className="app-container">
                    <Header 
                        onShowCart={showCart} 
                        cartCount={cartItems.length} 
                        onShowModules={showModules}
                        onShowTariffs={showTariffs}
                        onNavigateToHomeAnchor={navigateToHomeAnchor}
                        currentView={currentView}
                        onShowHome={showHome}
                    />
                    <ScrollFadeOverlay />

                    <div className="container">
                        {/* 1. ГЛАВНЫЙ БЛОК */}
                        <div id="о-нас">
                            <h1 className={`hero-title ${animationClass}`}>Prime Fort</h1>
                            <h2 className={`hero-subtitle ${animationClass}`}>Экосистема безопасности</h2>
                        </div>
                        
                        {/* 2. ПЕРВОЕ СЛАЙДШОУ (Акция, Миссия) */}
                        <Slideshow slides={slideshowData} initialAnimationClass={animationClass} onShowModules={showModules} 
                            onShowTariffs={showTariffs} />

                        {/* 3. БЛОК ИНФОРМАЦИИ О ПРОДУКТЕ */}
                        <AnimateOnScroll>
                            <div className="product-info-block">
                                <div className="svg-container">
                                    <ForceGraph /> {/* ВСТАВКА КОМПОНЕНТА ГРАФА */}
                                </div> 
                                <div className="description-container">
                                    <div className="product-description-text">
                                        <p>Prime Fort — это не просто система безопасности, а интегрированное решение, объединяющее передовые технологии блокчейна, кибер- и физической защиты. Мы предлагаем модульную, децентрализованную экосистему, которая адаптируется под ваши уникальные потребности, обеспечивая неизменность и достоверность данных. От интеллектуального мониторинга до быстрой реакции на инциденты — мы создаем фундамент цифрового доверия.</p>
                                    <p>Наши системы используют ИИ для проактивного прогнозирования угроз и автоматизации процессов, минимизируя риски и гарантируя максимальную эффективность, а блокчейн — для подтверждения юридической значимости и целостности каждого события.</p>
                                    </div>
                                    <span onClick={showModules} className="learn-more-button" style={{cursor: "pointer", alignSelf: "flex-end"}}>
                                        Узнать больше
                                    </span>
                                </div>
                            </div>
                        </AnimateOnScroll>
                        
                        {/* 4. КЛЮЧЕВЫЕ ПРОДУКТЫ (Модули) */}
                        <AnimateOnScroll>
                            <div className="key-products-subtitle-container" id="модули">
                                <h3 className="key-products-subtitle">Ключевые продукты экосистемы</h3>
                            </div>
                        </AnimateOnScroll>
                     <ProductSlideshow 
                        slides={keyProductsData} 
                        initialAnimationClass={animationClass} 
                        onAddToCart={handleAddToCart}
                        onShowModules={showModules} 
                        onShowTariffs={showTariffs} 
/>

                        {/* 5. БЛОК "ПОЧЕМУ МЫ" - (id="тарифы" убран) */}
                        <div> 
                            <AnimateOnScroll>
                                <div className="benefit-subtitle-container">
                                    <h3 className="benefit-subtitle">Почему мы?</h3>
                                    <h3 className="benefit-subtitle">Наши преимущества</h3>
                                </div>
                            </AnimateOnScroll>

                            <div className="benefit-card-container">
                                <AnimateOnScroll>
                                    <div className="benefit-card">
                                        <h4>Неизменяемость</h4>
                                        <p>Гарантируем абсолютную подлинность и целостность данных за счет технологии распределенного реестра.</p>
                                    </div>
                                </AnimateOnScroll>
                                <AnimateOnScroll>
                                    <div className="benefit-card">
                                        <h4>Юридическая доказательная база</h4>
                                        <p>Все записи и транзакции обладают юридической силой благодаря поддержке ЭЦП, смарт-контрактов и соответствию международным стандартам.</p>
                                    </div>
                                </AnimateOnScroll>
                                <AnimateOnScroll>
                                    <div className="benefit-card">
                                        <h4>Оптимальные пакетные решения</h4>
                                        <p>Вы выбираете из готовых тарифов, созданных для разных бизнес-задач, что обеспечивает максимальную функциональность при минимальных стартовых затратах.</p>
                                    </div>
                                </AnimateOnScroll>
                                <AnimateOnScroll>
                                    <div className="benefit-card">
                                        <h4>Проактивный Искусственный Интеллект</h4>
                                        <p>Используем ИИ для предиктивного анализа угроз, автоматического реагирования на инциденты и минимизации рисков.</p>
                                    </div>
                                </AnimateOnScroll>
                            </div>
                        </div>


                        {/* 6. АУДИТОРИЯ */}
                        <AnimateOnScroll>
                            <div className="target-audience-subtitle-container">
                                <h3 className="target-audience-subtitle">Prime Fort: Наш фокус. Ваш масштаб</h3>
                            </div>
                        </AnimateOnScroll>
                        
                        <div className="audience-card-container">
    <AnimateOnScroll>
        <div className="audience-card">
            <h4>Малый и Средний Бизнес</h4>
            <p>Готовая, проверенная защита, основанная на неизменности данных. Простая интеграция и низкая стоимость владения без необходимости привлекать штатных блокчейн-специалистов.</p>
        </div>
    </AnimateOnScroll>
    <AnimateOnScroll>
        <div className="audience-card">
            <h4>Крупный Корпоративный Сегмент</h4>
            <p>Децентрализованное управление безопасностью, глубокий анализ угроз и полное соответствие требованиям международного комплаенса.</p>
        </div>
    </AnimateOnScroll>
    <AnimateOnScroll>
        <div className="audience-card">
            <h4>Критическая Инфраструктура</h4>
            <p>Максимальный уровень защиты, устойчивость к APT-атакам и гарантированная юридическая значимость всех транзакций для регуляторов и государственного сектора.</p>
        </div>
    </AnimateOnScroll>
</div>
                        
                        {/* 7. ПАРТНЕРЫ */}
                        <div className="partners-subtitle-container is-visible" id="партнерство">
                            <h3 className="partners-subtitle">Наши Партнеры</h3>
                        </div>
                        
                        <PartnersMarquee logos={partnerLogos} />
                        
                        {/* <<< ИЗМЕНЕНИЕ: Вставлена форма обратной связи >>> */}
                        <ContactForm />
                        
                    </div>
                    
                    <Footer 
                        onShowModules={showModules}
                        onShowTariffs={showTariffs}
                        onNavigateToHomeAnchor={navigateToHomeAnchor}
                        onShowCart={showCart}
                    />
                    <ToastContainer notifications={notifications} onRemove={removeNotification} />
                </div>
            );
        };

        const rootElement = document.getElementById('root');
        ReactDOM.createRoot(rootElement).render(<App />);
    </script>
</body>
</html>
